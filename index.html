<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUPERNOVA - Zynex Edutech</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- ADDED: Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"></script>
    <!-- ADDED: QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        /* ... (ALL YOUR EXISTING CSS CODE STAYS EXACTLY THE SAME) ... */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* Hide Firebase status indicator */
.firebase-status {
    display: none !important;
}

        :root {
            --primary-blue: #3b82f6;
            --primary-purple: #8b5cf6;
            --primary-gradient: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            --secondary-gradient: linear-gradient(135deg, #f97316, #ef4444);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light-bg: #f8fafc;
            --dark-bg: #0f172a;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --white: #ffffff;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.15);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --radius-2xl: 32px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ... (ALL YOUR EXISTING CSS CODE STAYS EXACTLY THE SAME UNTIL PAYMENT PAGE) ... */

        /* ==================== ADDED: ENHANCED PAYMENT GATEWAY STYLES ==================== */
        .payment-gateway-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .payment-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .payment-header h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .payment-header p {
            color: #666;
            font-size: 16px;
        }

        .payment-amount-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }

        .payment-amount-display .amount-label {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .payment-amount-display .amount-value {
            font-size: 42px;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .payment-amount-display .order-id {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 10px;
            font-family: monospace;
        }

        .payment-methods-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 25px;
            overflow-x: auto;
        }

        .payment-tab {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            font-weight: 600;
            font-size: 15px;
            color: #666;
            cursor: pointer;
            border-radius: 8px;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .payment-tab:hover {
            background: rgba(255,255,255,0.7);
        }

        .payment-tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .payment-tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .payment-tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .upi-apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .upi-app-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .upi-app-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.1);
        }

        .upi-app-card.selected {
            border-color: #667eea;
            background: #f0f2ff;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }

        .upi-app-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .upi-app-icon.gpay { background: #0088ff; }
        .upi-app-icon.phonepe { background: #5f259f; }
        .upi-app-icon.paytm { background: #002e6e; }
        .upi-app-icon.bhim { background: #3b82f6; }
        .upi-app-icon.other { background: #666; }

        .upi-app-name {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .card-payment-form {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #f0f0f0;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .form-group-enhanced {
            margin-bottom: 20px;
        }

        .form-group-enhanced label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
            font-size: 14px;
        }

        .form-input-enhanced {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }

        .form-input-enhanced:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .card-input-group {
            position: relative;
        }

        .card-icons {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 5px;
        }

        .card-icon {
            width: 30px;
            height: 20px;
            background: #f0f0f0;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }

        .netbanking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }

        .bank-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .bank-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .bank-card.selected {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .bank-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 12px;
        }

        .bank-logo.sbi { background: #2c5f2d; }
        .bank-logo.hdfc { background: #004c8c; }
        .bank-logo.icici { background: #ff6b6b; }
        .bank-logo.axis { background: #951c1c; }
        .bank-logo.kotak { background: #7b3c3c; }

        .bank-name {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .wallets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .wallet-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .wallet-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .wallet-card.selected {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .wallet-icon {
            width: 50px;
            height: 50px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .wallet-icon.amazon { background: #ff9900; }
        .wallet-icon.mobikwik { background: #ea1d8c; }
        .wallet-icon.freecharge { background: #00a8ff; }
        .wallet-icon.ola { background: #000; }

        .wallet-name {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .qr-payment-section {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            border: 2px solid #f0f0f0;
        }

        .qr-code-container {
            width: 250px;
            height: 250px;
            margin: 0 auto 20px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upi-id-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 18px;
            color: #333;
            font-weight: 600;
        }

        .payment-instructions {
            background: #fff8e1;
            border: 2px solid #ffd54f;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
        }

        .payment-instructions h4 {
            color: #f57c00;
            margin-bottom: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-instructions ol {
            padding-left: 20px;
            color: #666;
            line-height: 1.6;
        }

        .payment-instructions li {
            margin-bottom: 8px;
        }

        .payment-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .pay-now-btn {
            flex: 1;
            max-width: 300px;
            padding: 18px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.5px;
        }

        .pay-now-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        .pay-now-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .cancel-payment-btn {
            padding: 18px 30px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cancel-payment-btn:hover {
            border-color: #ef4444;
            color: #ef4444;
            background: #fef2f2;
        }

        /* Payment Status Modal */
        .payment-status-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2001;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .payment-status-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            padding: 40px;
            text-align: center;
            animation: scaleIn 0.3s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .payment-status-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 36px;
            color: white;
        }

        .payment-status-icon.success {
            background: #10b981;
            animation: pulseSuccess 2s infinite;
        }

        .payment-status-icon.pending {
            background: #f59e0b;
            animation: pulseWarning 2s infinite;
        }

        .payment-status-icon.error {
            background: #ef4444;
        }

        @keyframes pulseSuccess {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        @keyframes pulseWarning {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }

        .payment-status-content h3 {
            font-size: 24px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .payment-status-content p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .payment-timer {
            font-size: 14px;
            color: #f59e0b;
            font-weight: 600;
            margin-top: 15px;
            padding: 10px;
            background: #fef3c7;
            border-radius: 8px;
            display: inline-block;
        }

        /* UPI ID Input Modal */
        .upi-input-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2002;
            padding: 20px;
        }

        .upi-input-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            padding: 30px;
        }

        .upi-input-content h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .upi-input-content input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: monospace;
            margin-bottom: 20px;
        }

        .upi-input-content input:focus {
            outline: none;
            border-color: #667eea;
        }

        .upi-input-actions {
            display: flex;
            gap: 15px;
        }

        /* Loading Overlay */
        .payment-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2003;
            gap: 20px;
        }

        .payment-loading .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .payment-loading p {
            font-size: 18px;
            color: #333;
            font-weight: 600;
        }

        /* Screenshot Upload Section (Updated) */
        .screenshot-upload-enhanced {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: #f0f2ff;
            margin: 30px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .screenshot-upload-enhanced:hover {
            background: #e6e9ff;
            transform: translateY(-3px);
        }

        .screenshot-upload-enhanced i {
            font-size: 48px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .screenshot-upload-enhanced h4 {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
        }

        .screenshot-upload-enhanced p {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .screenshot-preview-enhanced {
            max-width: 300px;
            max-height: 300px;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 3px solid white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .payment-gateway-container {
                padding: 20px;
            }
            
            .payment-amount-display .amount-value {
                font-size: 32px;
            }
            
            .payment-methods-tabs {
                flex-wrap: wrap;
            }
            
            .payment-tab {
                min-width: 120px;
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .upi-apps-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .qr-code-container {
                width: 200px;
                height: 200px;
            }
            
            .payment-actions {
                flex-direction: column;
            }
            
            .pay-now-btn, .cancel-payment-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .upi-apps-grid {
                grid-template-columns: 1fr;
            }
            
            .netbanking-grid, .wallets-grid {
                grid-template-columns: 1fr;
            }
            
            .payment-amount-display {
                padding: 20px;
            }
        }

        /* ADDED: Payment Status Badges */
        .payment-status-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            gap: 5px;
        }

        .payment-status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .payment-status-badge.processing {
            background: #dbeafe;
            color: #1e40af;
        }

        .payment-status-badge.completed {
            background: #d1fae5;
            color: #065f46;
        }

        .payment-status-badge.failed {
            background: #fee2e2;
            color: #991b1b;
        }

        /* ADDED: Payment History */
        .payment-history {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        .payment-history h4 {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .payment-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .payment-history-item:last-child {
            border-bottom: none;
        }

        .payment-history-info h5 {
            font-size: 15px;
            color: #333;
            margin-bottom: 5px;
        }

        .payment-history-info p {
            font-size: 13px;
            color: #666;
        }

        .payment-history-amount {
            font-size: 18px;
            font-weight: 700;
            color: #10b981;
        }

        /* ADDED: Secure Payment Badge */
        .secure-payment-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #f0fdf4;
            border-radius: 10px;
            border: 2px solid #10b981;
            margin: 20px 0;
        }

        .secure-payment-badge i {
            font-size: 24px;
            color: #10b981;
        }

        .secure-payment-badge span {
            font-weight: 600;
            color: #065f46;
        }

        /* ADDED: Payment Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #667eea;
            top: -10px;
            z-index: 9999;
            opacity: 0;
        }

        /* ADDED: Payment Timer */
        .payment-timer-container {
            background: #fff8e1;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .payment-timer-container h4 {
            color: #f59e0b;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .payment-timer-display {
            font-size: 32px;
            font-weight: 700;
            color: #333;
            font-family: monospace;
        }

        /* ... (YOUR EXISTING CSS CONTINUES BELOW - ALL REMAINS SAME) ... */
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
        }

        h1 { font-size: 3.5rem; }
        h2 { font-size: 2.5rem; }
        h3 { font-size: 2rem; }
        h4 { font-size: 1.5rem; }

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            h3 { font-size: 1.75rem; }
            h4 { font-size: 1.25rem; }
        }

        /* Layout */
        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .section {
            padding: 5rem 0;
        }

        .text-center { text-align: center; }

        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .gap-8 { gap: 2rem; }

        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

        @media (min-width: 768px) {
            .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
            .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
            .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 2rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            gap: 0.5rem;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            z-index: -1;
            transition: var(--transition);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: var(--white);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .btn-secondary {
            background: var(--secondary-gradient);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }

        .btn-outline:hover {
            background: var(--primary-blue);
            color: var(--white);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 0.5rem 1.25rem;
            font-size: 0.875rem;
        }

        .btn-lg {
            padding: 1rem 2.5rem;
            font-size: 1.125rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
        }

        .form-control {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-control::placeholder {
            color: #94a3b8;
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
            background-position: right 1rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* Card Styles */
        .card {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: 1px solid #f1f5f9;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .card-lg {
            padding: 3rem;
        }

        /* Hero Section */
        .hero {
            background: var(--primary-gradient);
            color: var(--white);
            padding: 8rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none"><path d="M0,0V100H1000V0Z" fill="white" opacity="0.05"/></svg>');
            background-size: 100% 100%;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, #ffffff, #e2e8f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-bottom: 2.5rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (max-width: 768px) {
            .hero {
                padding: 5rem 0;
            }
            .hero-title {
                font-size: 2.5rem;
            }
            .hero-subtitle {
                font-size: 1.25rem;
            }
        }

        /* Navigation - Original Desktop View */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            box-shadow: var(--shadow-sm);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--primary-blue);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link.active {
            color: var(--primary-blue);
        }

        .nav-link.active::after {
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-subtext {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        /* Feature Cards */
        .feature-card {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius-xl);
            text-align: center;
            transition: var(--transition);
            border: 1px solid #f1f5f9;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: var(--white);
        }

        .feature-icon.blue {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .feature-icon.purple {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
        }

        .feature-icon.green {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .feature-icon.orange {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .feature-description {
            color: var(--text-light);
            font-size: 0.875rem;
        }

        /* Founder Cards */
        .founder-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 2rem;
            border-radius: var(--radius-2xl);
            text-align: center;
            transition: var(--transition);
            border: 1px solid #e2e8f0;
        }

        .founder-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .founder-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--white);
            box-shadow: var(--shadow-lg);
        }

        .founder-avatar.blue {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .founder-avatar.purple {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
        }

        .founder-avatar.green {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .founder-avatar.orange {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        .founder-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .founder-role {
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Footer */
        .footer {
            background: var(--dark-bg);
            color: var(--white);
            padding: 4rem 0 2rem;
        }

        .footer-section {
            margin-bottom: 2rem;
        }

        .footer-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--white);
        }

        .footer-link {
            display: block;
            color: #cbd5e1;
            text-decoration: none;
            margin-bottom: 0.75rem;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--white);
            transform: translateX(5px);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            color: #cbd5e1;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-bottom {
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: #94a3b8;
            font-size: 0.875rem;
        }

        /* WhatsApp Button */
        .whatsapp-btn {
            position: fixed;
            bottom: 2rem;
            right: 1rem;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transition: var(--transition);
            cursor: pointer;
            border: none;
        }

        .whatsapp-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 10px 30px rgba(37, 211, 102, 0.4);
        }

        /* Mobile View Toggle Button - Only shows on mobile */
        .mobile-view-toggle {
            position: fixed;
            bottom: 2rem;
            left: 1rem;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: var(--shadow-xl);
            z-index: 999;
            cursor: pointer;
            border: none;
            transition: var(--transition);
        }

        .mobile-view-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
        }

        /* ============================================ */
        /* MOBILE OPTIMIZED VIEW - FIXED BIGGER NAVBAR */
        /* ============================================ */

        /* Mobile Optimized View Styles (applied when mobile mode is active) */
        body.mobile-view-active {
            font-size: 14px;
        }

        body.mobile-view-active .container {
            padding: 0 1rem;
        }

        body.mobile-view-active .section {
            padding: 3rem 0;
        }

        body.mobile-view-active .hero {
            padding: 6rem 0 4rem;
        }

        body.mobile-view-active .hero-title {
            font-size: 2rem;
        }

        body.mobile-view-active .hero-subtitle {
            font-size: 1.1rem;
        }

        body.mobile-view-active .card,
        body.mobile-view-active .feature-card,
        body.mobile-view-active .founder-card {
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        body.mobile-view-active .grid,
        body.mobile-view-active .grid-cols-2,
        body.mobile-view-active .grid-cols-3,
        body.mobile-view-active .grid-cols-4,
        body.mobile-view-active .md\:grid-cols-2,
        body.mobile-view-active .md\:grid-cols-3,
        body.mobile-view-active .md\:grid-cols-4 {
            grid-template-columns: 1fr !important;
            gap: 1rem;
        }

        /* Mobile View Navbar - BIGGER VERSION (Fixed as requested) */
        body.mobile-view-active .navbar {
            padding: 0.5rem 0 !important;
            min-height: 60px !important;
            height: 60px !important;
            max-height: 60px !important;
            overflow: hidden;
        }

        body.mobile-view-active .navbar .container {
            flex-direction: row !important;
            align-items: center;
            padding: 0 0.75rem !important;
            height: 100%;
            min-height: 60px;
        }

        body.mobile-view-active .logo {
            flex-direction: row;
            align-items: center;
            gap: 0.6rem;
            margin-bottom: 0;
            padding: 0;
            height: 100%;
        }

        body.mobile-view-active .logo-icon {
            width: 30px !important;
            height: 30px !important;
            font-size: 0.9rem !important;
            flex-shrink: 0;
        }

        body.mobile-view-active .logo-text {
            font-size: 1.2rem !important;
            line-height: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 130px;
        }

        body.mobile-view-active .logo-subtext {
            display: none !important;
        }

        body.mobile-view-active .nav-links {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 0.35rem;
            padding: 0;
            margin: 0;
            height: 100%;
            align-items: center;
            justify-content: flex-end;
            flex: 1;
        }

        body.mobile-view-active .nav-link {
            padding: 0.25rem 0.5rem !important;
            font-size: 0.8rem !important;
            white-space: nowrap;
            line-height: 1;
            border-radius: 4px;
            background: rgba(59, 130, 246, 0.05);
        }

        body.mobile-view-active .nav-link:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        body.mobile-view-active .nav-link::after {
            display: none;
        }

        body.mobile-view-active .nav-link.active {
            background: rgba(59, 130, 246, 0.15);
            font-weight: 600;
        }

        body.mobile-view-active #auth-buttons {
            display: flex;
            flex-direction: row;
            gap: 0.35rem;
            margin: 0;
            padding: 0;
            align-items: center;
            height: 100%;
        }

        body.mobile-view-active #auth-buttons .nav-link,
        body.mobile-view-active #auth-buttons .btn {
            font-size: 0.8rem !important;
            padding: 0.25rem 0.6rem !important;
            min-height: auto;
            height: auto;
            line-height: 1;
        }

        body.mobile-view-active #auth-buttons .btn-sm {
            padding: 0.25rem 0.6rem !important;
            font-size: 0.8rem !important;
            min-width: auto;
        }

        body.mobile-view-active #auth-buttons .btn {
            border-radius: 4px;
            border-width: 1px;
        }

        body.mobile-view-active .flex:not(.navbar .flex) {
            flex-direction: column;
        }

        body.mobile-view-active .dashboard-header-buttons {
            flex-direction: row !important;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        body.mobile-view-active .btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.9rem;
            width: 100%;
            margin-bottom: 0.5rem;
        }

        body.mobile-view-active .btn-lg {
            padding: 0.875rem 2rem;
            font-size: 1rem;
        }

        body.mobile-view-active .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        body.mobile-view-active .feature-icon {
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
        }

        body.mobile-view-active .founder-avatar {
            width: 100px;
            height: 100px;
            font-size: 2rem;
        }

        body.mobile-view-active .tracking-step:not(:last-child)::after {
            left: 25px;
            top: 50px;
        }

        body.mobile-view-active .step-icon {
            width: 50px;
            height: 50px;
            font-size: 1.25rem;
        }

        body.mobile-view-active .form-control {
            padding: 0.75rem;
            font-size: 0.9rem;
        }

        body.mobile-view-active textarea.form-control {
            min-height: 100px;
        }

        body.mobile-view-active .payment-method {
            padding: 0.75rem;
        }

        body.mobile-view-active .payment-icon {
            width: 35px;
            height: 35px;
        }

        /* Special adjustments for extra small screens */
        @media (max-width: 480px) {
            body.mobile-view-active .navbar {
                min-height: 55px !important;
                height: 55px !important;
                max-height: 55px !important;
            }
            
            body.mobile-view-active .logo-text {
                font-size: 1.1rem !important;
                max-width: 110px;
            }
            
            body.mobile-view-active .nav-link,
            body.mobile-view-active #auth-buttons .nav-link,
            body.mobile-view-active #auth-buttons .btn {
                font-size: 0.75rem !important;
                padding: 0.2rem 0.45rem !important;
            }
            
            body.mobile-view-active .logo-icon {
                width: 28px !important;
                height: 28px !important;
                font-size: 0.85rem !important;
            }
        }

        /* Status Badges */
        .badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-estimated {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-paid {
            background: #d1fae5;
            color: #065f46;
        }

        /* Order Tracking */
        .tracking-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .tracking-step:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 30px;
            top: 60px;
            width: 2px;
            height: calc(100% - 40px);
            background: #e2e8f0;
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            z-index: 1;
            flex-shrink: 0;
        }

        .step-icon.completed {
            background: var(--success);
        }

        .step-icon.active {
            background: var(--primary-blue);
            animation: pulse 2s infinite;
        }

        .step-icon.pending {
            background: #cbd5e1;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .step-status {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        /* Payment Methods */
        .payment-method {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
        }

        .payment-method:hover {
            border-color: var(--primary-blue);
            background: #f0f9ff;
        }

        .payment-method.selected {
            border-color: var(--primary-blue);
            background: #f0f9ff;
        }

        .payment-icon {
            width: 40px;
            height: 40px;
            background: var(--light-bg);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
        }

        /* Screenshot Upload */
        .screenshot-upload {
            border: 2px dashed #e2e8f0;
            border-radius: var(--radius-md);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .screenshot-upload:hover {
            border-color: var(--primary-blue);
            background: #f0f9ff;
        }

        .screenshot-upload i {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
        }

        .screenshot-preview {
            max-width: 300px;
            max-height: 300px;
            border-radius: var(--radius-md);
            margin-top: 1rem;
            display: none;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-md);
            background: white;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.info {
            border-left: 4px solid var(--primary-blue);
        }

        .notification-icon {
            font-size: 1.25rem;
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        .notification.info .notification-icon {
            color: var(--primary-blue);
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .block { display: block; }
        .w-full { width: 100%; }
        .max-w-md { max-width: 28rem; }
        .max-w-lg { max-width: 32rem; }
        .max-w-xl { max-width: 36rem; }
        .max-w-2xl { max-width: 42rem; }
        .max-w-3xl { max-width: 48rem; }
        .max-w-4xl { max-width: 56rem; }
        .max-w-5xl { max-width: 64rem; }
        .max-w-6xl { max-width: 72rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
        .py-12 { padding-top: 3rem; padding-bottom: 3rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .space-y-8 > * + * { margin-top: 2rem; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--dark-blue), var(--dark-purple));
        }

        /* Hide mobile toggle on desktop */
        @media (min-width: 769px) {
            .mobile-view-toggle {
                display: none !important;
            }
        }

        /* Show mobile toggle only on mobile */
        @media (max-width: 768px) {
            .mobile-view-toggle {
                display: flex;
            }
        }

        /* ADDED: Payment Screenshot Modal Styles */
        .payment-screenshot-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .payment-screenshot-modal.hidden {
            display: none;
        }

        .payment-screenshot-content {
            background: white;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .payment-screenshot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .payment-screenshot-header h3 {
            margin: 0;
            color: #333;
            font-size: 1.25rem;
        }

        .payment-screenshot-body {
            padding: 20px;
            text-align: center;
        }

        .payment-screenshot-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .payment-screenshot-info {
            text-align: left;
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .payment-screenshot-info p {
            margin: 5px 0;
            color: #555;
        }

        /* ADDED: Firebase Status Indicator */
        .firebase-status {
            position: fixed;
            bottom: 90px;
            right: 20px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 999;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }

        .firebase-status.connected {
            color: #10b981;
            border: 1px solid #10b981;
        }

        .firebase-status.disconnected {
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .firebase-status .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .firebase-status.connected .status-dot {
            background: #10b981;
            animation: pulse-dot 2s infinite;
        }

        .firebase-status.disconnected .status-dot {
            background: #ef4444;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ADDED: View Receipt Button */
        .view-receipt-btn {
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
            transition: all 0.3s;
        }

        .view-receipt-btn:hover {
            background: #0284c7;
            transform: translateY(-2px);
        }
        
        /* ADDED: Address Validation Warning */
        .address-warning {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            color: #92400e;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .address-warning i {
            color: #f59e0b;
            font-size: 1.2rem;
        }
        
        /* ADDED: Address Required Indicator */
        .required-field::after {
            content: " *";
            color: #ef4444;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container flex items-center justify-between">
            <a href="#" onclick="setPage('home')" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-rocket"></i>
                </div>
                <div>
                    <div class="logo-text">SUPERNOVA</div>
                    <div class="logo-subtext">Zynex Edutech</div>
                </div>
            </a>
            
            <div class="nav-links">
                <a href="#" onclick="setPage('home')" class="nav-link active">Home</a>
                <a href="#" onclick="setPage('about')" class="nav-link">About</a>
                <a href="#" onclick="setPage('services')" class="nav-link">Services</a>
                <a href="#" onclick="setPage('founders')" class="nav-link">Founders</a>
                
                <div id="auth-buttons">
                    <!-- Auth buttons will be inserted here -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile View Toggle Button (only shows on mobile) -->
    <button class="mobile-view-toggle" onclick="toggleMobileView()" id="mobileToggleBtn">
        <i class="fas fa-mobile-alt"></i>
    </button>

    <!-- ADDED: Firebase Status Indicator -->
    <div id="firebase-status" class="firebase-status disconnected">
        <span class="status-dot"></span>
        <span>Firebase: Offline</span>
    </div>

    <!-- Notification Area -->
    <div id="notification-area"></div>

    <!-- ADDED: Payment Screenshot Modal -->
    <div id="payment-screenshot-modal" class="payment-screenshot-modal hidden">
        <div class="payment-screenshot-content">
            <div class="payment-screenshot-header">
                <h3>Payment Receipt</h3>
                <button onclick="closePaymentScreenshot()" class="btn btn-sm btn-outline">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
            <div class="payment-screenshot-body">
                <img id="screenshot-image" class="payment-screenshot-image" alt="Payment Receipt">
                <div id="screenshot-info" class="payment-screenshot-info">
                    <!-- Payment info will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- ADDED: Payment Gateway Page -->
    <div id="payment-gateway-page" class="page hidden">
        <div class="container py-8">
            <div class="max-w-5xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <button onclick="backToDashboardFromGateway()" class="btn btn-outline">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
                    </button>
                    <h2 class="text-2xl font-bold">Complete Payment</h2>
                    <div class="payment-status-badge pending" id="gateway-payment-status">
                        <i class="fas fa-clock"></i> Pending
                    </div>
                </div>
                
                <div class="payment-gateway-container">
                    <!-- Payment Header -->
                    <div class="payment-header">
                        <h2>Secure Payment Gateway</h2>
                        <p>Complete your payment safely and securely</p>
                    </div>
                    
                    <!-- Amount Display -->
                    <div class="payment-amount-display">
                        <div class="amount-label">Total Amount to Pay</div>
                        <div class="amount-value" id="gateway-amount">0</div>
                        <div class="order-id" id="gateway-order-id">Order #0000</div>
                    </div>
                    
                    <!-- Secure Payment Badge -->
                    <div class="secure-payment-badge">
                        <i class="fas fa-shield-alt"></i>
                        <span>100% Secure Payment  SSL Encrypted  PCI DSS Compliant</span>
                    </div>
                    
                    <!-- Payment Timer (For UPI Payments) -->
                    <div id="payment-timer-container" class="payment-timer-container hidden">
                        <h4><i class="fas fa-clock mr-2"></i> Complete Payment Within</h4>
                        <div class="payment-timer-display" id="payment-timer">10:00</div>
                        <p class="text-sm mt-2">This session will expire in <span id="timer-minutes">10</span> minutes</p>
                    </div>
                    
                    <!-- IMPORTANT: Company UPI ID Notice -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-info-circle text-blue-600 text-xl"></i>
                            <div>
                                <h4 class="font-semibold text-blue-800">Important Notice</h4>
                                <p class="text-blue-700 text-sm">All payments should be made to our company UPI ID only:</p>
                                <p class="font-mono font-bold text-blue-900 mt-1">farhanzain448@okhdfcbank</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Payment Methods Tabs -->
                    <div class="payment-methods-tabs">
                        <button class="payment-tab active" onclick="showPaymentTab('upi')" id="tab-upi">
                            <i class="fas fa-mobile-alt"></i> UPI Apps
                        </button>
                        <button class="payment-tab" onclick="showPaymentTab('cards')" id="tab-cards">
                            <i class="fas fa-credit-card"></i> Cards
                        </button>
                        <button class="payment-tab" onclick="showPaymentTab('netbanking')" id="tab-netbanking">
                            <i class="fas fa-university"></i> Net Banking
                        </button>
                        <button class="payment-tab" onclick="showPaymentTab('wallets')" id="tab-wallets">
                            <i class="fas fa-wallet"></i> Wallets
                        </button>
                        <button class="payment-tab" onclick="showPaymentTab('qr')" id="tab-qr">
                            <i class="fas fa-qrcode"></i> QR Code
                        </button>
                    </div>
                    
                    <!-- UPI Tab -->
                    <div id="upi-tab-content" class="payment-tab-content active">
                        <h3 class="text-lg font-semibold mb-4">Choose UPI App</h3>
                        <div class="upi-apps-grid">
                            <div class="upi-app-card" onclick="selectUPIApp('gpay')" id="gpay-card">
                                <div class="upi-app-icon gpay">
                                    <i class="fab fa-google-pay"></i>
                                </div>
                                <div class="upi-app-name">Google Pay</div>
                            </div>
                            <div class="upi-app-card" onclick="selectUPIApp('phonepe')" id="phonepe-card">
                                <div class="upi-app-icon phonepe">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="upi-app-name">PhonePe</div>
                            </div>
                            <div class="upi-app-card" onclick="selectUPIApp('paytm')" id="paytm-card">
                                <div class="upi-app-icon paytm">
                                    <i class="fas fa-rupee-sign"></i>
                                </div>
                                <div class="upi-app-name">Paytm</div>
                            </div>
                            <div class="upi-app-card" onclick="selectUPIApp('bhim')" id="bhim-card">
                                <div class="upi-app-icon bhim">
                                    <i class="fas fa-qrcode"></i>
                                </div>
                                <div class="upi-app-name">BHIM UPI</div>
                            </div>
                        </div>
                        
                        <!-- CHANGED: Removed "Enter UPI ID" section and replaced with company UPI ID info -->
                        <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-university text-green-600 text-xl"></i>
                                <div>
                                    <h4 class="font-semibold text-green-800">Company UPI ID</h4>
                                    <p class="text-green-700">All payments should be made to:</p>
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border border-green-300">
                                <p class="font-mono text-center text-lg font-bold text-gray-800">
                                    farhanzain448@okhdfcbank
                                </p>
                                <button onclick="copyCompanyUPIId()" class="btn btn-outline btn-sm w-full mt-2">
                                    <i class="fas fa-copy mr-2"></i> Copy UPI ID
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cards Tab -->
                    <div id="cards-tab-content" class="payment-tab-content">
                        <h3 class="text-lg font-semibold mb-4">Enter Card Details</h3>
                        <form id="card-payment-form">
                            <div class="card-payment-form">
                                <div class="form-group-enhanced">
                                    <label for="card-number">Card Number</label>
                                    <div class="card-input-group">
                                        <input type="text" id="card-number" class="form-input-enhanced" 
                                               placeholder="1234 5678 9012 3456" maxlength="19"
                                               oninput="formatCardNumber(this)">
                                        <div class="card-icons">
                                            <div class="card-icon" id="visa-icon">VISA</div>
                                            <div class="card-icon" id="mastercard-icon">MC</div>
                                            <div class="card-icon" id="rupay-icon">RUPAY</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group-enhanced">
                                        <label for="card-expiry">Expiry Date</label>
                                        <input type="text" id="card-expiry" class="form-input-enhanced" 
                                               placeholder="MM/YY" maxlength="5"
                                               oninput="formatExpiryDate(this)">
                                    </div>
                                    <div class="form-group-enhanced">
                                        <label for="card-cvv">CVV</label>
                                        <input type="password" id="card-cvv" class="form-input-enhanced" 
                                               placeholder="123" maxlength="4">
                                    </div>
                                </div>
                                
                                <div class="form-group-enhanced">
                                    <label for="card-name">Name on Card</label>
                                    <input type="text" id="card-name" class="form-input-enhanced" 
                                           placeholder="John Doe">
                                </div>
                                
                                <button type="button" onclick="processCardPayment()" class="pay-now-btn">
                                    <i class="fas fa-lock mr-2"></i>
                                    Pay Securely <span id="card-pay-amount">0</span>
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Net Banking Tab -->
                    <div id="netbanking-tab-content" class="payment-tab-content">
                        <h3 class="text-lg font-semibold mb-4">Select Your Bank</h3>
                        <div class="netbanking-grid">
                            <div class="bank-card" onclick="selectBank('sbi')">
                                <div class="bank-logo sbi">SBI</div>
                                <div class="bank-name">State Bank of India</div>
                            </div>
                            <div class="bank-card" onclick="selectBank('hdfc')">
                                <div class="bank-logo hdfc">HDFC</div>
                                <div class="bank-name">HDFC Bank</div>
                            </div>
                            <div class="bank-card" onclick="selectBank('icici')">
                                <div class="bank-logo icici">ICICI</div>
                                <div class="bank-name">ICICI Bank</div>
                            </div>
                            <div class="bank-card" onclick="selectBank('axis')">
                                <div class="bank-logo axis">AXIS</div>
                                <div class="bank-name">Axis Bank</div>
                            </div>
                            <div class="bank-card" onclick="selectBank('kotak')">
                                <div class="bank-logo kotak">KOTAK</div>
                                <div class="bank-name">Kotak Mahindra</div>
                            </div>
                            <div class="bank-card" onclick="selectBank('other')">
                                <div class="bank-logo" style="background: #666;">OTH</div>
                                <div class="bank-name">Other Banks</div>
                            </div>
                        </div>
                        
                        <!-- CHANGED: Added company payment info -->
                        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-exclamation-triangle text-yellow-600"></i>
                                <div>
                                    <p class="text-sm text-yellow-800">
                                        <span class="font-semibold">Note:</span> When making payment via net banking, ensure the beneficiary is:
                                    </p>
                                    <p class="font-mono text-sm mt-1 font-bold text-gray-800">
                                        farhanzain448@okhdfcbank
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Wallets Tab -->
                    <div id="wallets-tab-content" class="payment-tab-content">
                        <h3 class="text-lg font-semibold mb-4">Select Wallet</h3>
                        <div class="wallets-grid">
                            <div class="wallet-card" onclick="selectWallet('amazon')">
                                <div class="wallet-icon amazon">
                                    <i class="fab fa-amazon"></i>
                                </div>
                                <div class="wallet-name">Amazon Pay</div>
                            </div>
                            <div class="wallet-card" onclick="selectWallet('mobikwik')">
                                <div class="wallet-icon mobikwik">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="wallet-name">MobiKwik</div>
                            </div>
                            <div class="wallet-card" onclick="selectWallet('freecharge')">
                                <div class="wallet-icon freecharge">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="wallet-name">FreeCharge</div>
                            </div>
                            <div class="wallet-card" onclick="selectWallet('ola')">
                                <div class="wallet-icon ola">
                                    <i class="fas fa-taxi"></i>
                                </div>
                                <div class="wallet-name">Ola Money</div>
                            </div>
                        </div>
                        
                        <!-- CHANGED: Added company payment info -->
                        <div class="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-info-circle text-purple-600"></i>
                                <div>
                                    <p class="text-sm text-purple-800">
                                        <span class="font-semibold">Important:</span> Send payment to company UPI ID via your wallet:
                                    </p>
                                    <p class="font-mono text-sm mt-1 font-bold text-gray-800">
                                        farhanzain448@okhdfcbank
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- QR Code Tab -->
                    <div id="qr-tab-content" class="payment-tab-content">
                        <div class="qr-payment-section">
                            <h3 class="text-lg font-semibold mb-4">Scan QR Code to Pay</h3>
                            <div class="qr-code-container" id="qr-code-display">
                                <!-- QR Code will be generated here -->
                                <div id="qr-code"></div>
                            </div>
                            <!-- CHANGED: Company UPI ID is pre-filled -->
                            <div class="upi-id-display" id="display-upi-id">
                                farhanzain448@okhdfcbank
                            </div>
                            <p class="text-gray-600 mb-4">
                                Scan this QR code with any UPI app to complete payment
                            </p>
                            <button onclick="copyCompanyUPIId()" class="btn btn-outline mr-2">
                                <i class="fas fa-copy mr-2"></i> Copy UPI ID
                            </button>
                            <button onclick="refreshQRCode()" class="btn btn-outline">
                                <i class="fas fa-sync-alt mr-2"></i> Refresh QR
                            </button>
                        </div>
                    </div>
                    
                    <!-- Payment Instructions -->
                    <div class="payment-instructions">
                        <h4><i class="fas fa-info-circle mr-2"></i> Important Instructions</h4>
                        <ol>
                            <li><strong>All payments must be made to:</strong> farhanzain448@okhdfcbank</li>
                            <li>Do not close this window until payment is complete</li>
                            <li>Keep your payment screenshot ready for verification</li>
                            <li>Payment verification may take 2-3 minutes</li>
                            <li>Contact support if payment fails or gets stuck</li>
                        </ol>
                    </div>
                    
                    <!-- Payment Actions -->
                    <div class="payment-actions">
                        <button onclick="cancelGatewayPayment()" class="cancel-payment-btn">
                            <i class="fas fa-times mr-2"></i> Cancel Payment
                        </button>
                        <button onclick="proceedToPayment()" class="pay-now-btn" id="proceed-payment-btn">
                            <i class="fas fa-credit-card mr-2"></i>
                            Proceed to Pay <span id="proceed-amount">0</span>
                        </button>
                    </div>
                </div>
                
                <!-- Screenshot Upload Section (Still Required) -->
                <div class="screenshot-upload-enhanced" onclick="document.getElementById('gateway-screenshot-file').click()" 
                     id="screenshot-upload-section">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h4>Upload Payment Screenshot</h4>
                    <p>Click to upload proof of payment (Required for verification)</p>
                    <p class="text-sm text-gray-500">JPG, PNG, or PDF files only</p>
                    <input type="file" id="gateway-screenshot-file" accept=".jpg,.jpeg,.png,.pdf" class="hidden">
                    <img id="gateway-screenshot-preview" class="screenshot-preview-enhanced" alt="Payment Screenshot">
                </div>
                
                <button onclick="uploadGatewayScreenshot()" class="btn btn-success w-full" id="upload-screenshot-btn">
                    <i class="fas fa-upload mr-2"></i>
                    Upload Screenshot & Confirm Payment
                </button>
                
                <!-- Payment History (If any) -->
                <div class="payment-history hidden" id="payment-history-section">
                    <h4><i class="fas fa-history mr-2"></i> Payment History</h4>
                    <div id="payment-history-items">
                        <!-- Payment history items will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ADDED: Payment Status Modal -->
    <div id="payment-status-modal" class="payment-status-modal hidden">
        <div class="payment-status-content">
            <div class="payment-status-icon success" id="payment-status-icon">
                <i class="fas fa-check"></i>
            </div>
            <h3 id="payment-status-title">Payment Successful!</h3>
            <p id="payment-status-message">
                Your payment of <span id="status-amount">0</span> has been processed successfully.
                Order ID: <strong id="status-order-id">#0000</strong>
            </p>
            <div class="payment-timer hidden" id="redirect-timer">
                Redirecting to dashboard in <span id="redirect-seconds">5</span> seconds...
            </div>
            <button onclick="closePaymentStatus()" class="btn btn-primary mt-4">
                <i class="fas fa-check mr-2"></i> Continue
            </button>
        </div>
    </div>

    <!-- ADDED: UPI Input Modal (KEPT BUT NOT USED - For backward compatibility) -->
    <div id="upi-input-modal" class="upi-input-modal hidden">
        <div class="upi-input-content">
            <h3>Company UPI ID</h3>
            <input type="text" id="manual-upi-id" readonly value="farhanzain448@okhdfcbank" 
                   class="bg-gray-100 cursor-not-allowed">
            <p class="text-sm text-gray-600 mb-3">
                All payments should be made to this company UPI ID only.
            </p>
            <div class="upi-input-actions">
                <button onclick="closeUPIInput()" class="btn btn-outline">Close</button>
                <button onclick="copyCompanyUPIId()" class="btn btn-primary">Copy UPI ID</button>
            </div>
        </div>
    </div>

    <!-- ADDED: Payment Loading Overlay -->
    <div id="payment-loading" class="payment-loading hidden">
        <div class="spinner"></div>
        <p id="loading-message">Processing Payment...</p>
    </div>

    <!-- Main Content Area -->
    <div id="content">
        <!-- Home Page -->
        <div id="home-page" class="page">
            <!-- Hero Section -->
            <section class="hero">
                <div class="container">
                    <div class="hero-content text-center">
                        <h1 class="hero-title">Transform Your Ideas Into Reality</h1>
                        <p class="hero-subtitle">Professional robotics and electronics project development for students, innovators, and educational institutions.</p>
                        <button onclick="handleStartProject()" class="btn btn-secondary btn-lg">
                            Start Your Project <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Founders Section -->
            <section class="section bg-white">
                <div class="container">
                    <h2 class="text-center mb-12">Meet Our Visionary Founders</h2>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <!-- Founder 1 -->
                        <div class="founder-card">
                            <div class="founder-avatar blue">VM</div>
                            <h3 class="founder-name">Vaibhav M</h3>
                            <div class="founder-role">CEO</div>
                            <p class="text-sm text-gray-600 mt-2">Leading innovation with strategic vision</p>
                        </div>
                        
                        <!-- Founder 2 -->
                        <div class="founder-card">
                            <div class="founder-avatar purple">FZ</div>
                            <h3 class="founder-name">Farhan Zain</h3>
                            <div class="founder-role">CTO</div>
                            <p class="text-sm text-gray-600 mt-2">Driving technical excellence</p>
                        </div>
                        
                        <!-- Founder 3 -->
                        <div class="founder-card">
                            <div class="founder-avatar green">KU</div>
                            <h3 class="founder-name">Krishnan Unni</h3>
                            <div class="founder-role">COO</div>
                            <p class="text-sm text-gray-600 mt-2">Ensuring operational excellence</p>
                        </div>
                        
                        <!-- Founder 4 -->
                        <div class="founder-card">
                            <div class="founder-avatar orange">KN</div>
                            <h3 class="founder-name">Karthik Nair</h3>
                            <div class="founder-role">CFO</div>
                            <p class="text-sm text-gray-600 mt-2">Managing financial strategy</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="section bg-gray-50">
                <div class="container">
                    <h2 class="text-center mb-12">Why Choose Supernova?</h2>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <!-- Feature 1 -->
                        <div class="feature-card">
                            <div class="feature-icon blue">
                                <i class="fas fa-star"></i>
                            </div>
                            <h3 class="feature-title">Expert Team</h3>
                            <p class="feature-description">Industry experts with decades of combined experience</p>
                        </div>
                        
                        <!-- Feature 2 -->
                        <div class="feature-card">
                            <div class="feature-icon purple">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 class="feature-title">Fast Delivery</h3>
                            <p class="feature-description">Quick turnaround without compromising quality</p>
                        </div>
                        
                        <!-- Feature 3 -->
                        <div class="feature-card">
                            <div class="feature-icon green">
                                <i class="fas fa-award"></i>
                            </div>
                            <h3 class="feature-title">Quality Assured</h3>
                            <p class="feature-description">Professional execution with quality checks</p>
                        </div>
                        
                        <!-- Feature 4 -->
                        <div class="feature-card">
                            <div class="feature-icon orange">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3 class="feature-title">Student Focused</h3>
                            <p class="feature-description">Affordable rates for students and institutions</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Auth Page -->
        <div id="auth-page" class="page hidden">
            <div class="min-h-screen flex items-center justify-center p-4 bg-gray-50">
                <div class="max-w-md w-full">
                    <button onclick="setPage('home')" class="btn btn-outline mb-6">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    
                    <div class="card card-lg">
                        <h2 class="text-2xl font-bold text-center mb-6">Welcome to Supernova</h2>
                        
                        <div class="flex gap-4 mb-8">
                            <button onclick="showLoginForm()" id="login-tab" class="flex-1 btn btn-primary">
                                Login
                            </button>
                            <button onclick="showSignupForm()" id="signup-tab" class="flex-1 btn btn-outline">
                                Sign Up
                            </button>
                        </div>
                        
                        <!-- Login Form -->
                        <div id="login-form">
                            <div class="space-y-4">
                                <div class="form-group">
                                    <input type="email" id="login-email" class="form-control" placeholder="Email address">
                                </div>
                                <div class="form-group">
                                    <input type="password" id="login-password" class="form-control" placeholder="Password">
                                </div>
                                <button onclick="handleLogin()" class="btn btn-primary w-full">
                                    <i class="fas fa-sign-in-alt mr-2"></i> Login
                                </button>
                            </div>
                        </div>
                        
                        <!-- Signup Form -->
                        <div id="signup-form" class="hidden">
                            <div class="space-y-4">
                                <div class="form-group">
                                    <input type="email" id="signup-email" class="form-control" placeholder="Email address">
                                </div>
                                <div class="form-group">
                                    <input type="password" id="signup-password" class="form-control" placeholder="Password">
                                </div>
                                <div class="form-group">
                                    <input type="password" id="signup-confirm-password" class="form-control" placeholder="Confirm Password">
                                </div>
                                <button onclick="handleSignup()" class="btn btn-primary w-full">
                                    <i class="fas fa-user-plus mr-2"></i> Create Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page hidden">
            <div class="container py-8">
                <!-- Dashboard Header -->
                <div class="flex items-center justify-between mb-8">
                    <button onclick="setPage('home')" class="btn btn-outline">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    
                    <h2 class="text-2xl font-bold">My Dashboard</h2>
                    
                    <button onclick="handleLogout()" class="btn btn-danger">
                        <i class="fas fa-sign-out-alt mr-2"></i> Logout
                    </button>
                </div>
                
                <!-- Main Dashboard Content -->
                <div id="dashboard-content">
                    <!-- Submit Project Form -->
                    <div id="submit-project">
                        <div class="card mb-8">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold">Submit New Project</h3>
                                <div class="flex gap-3">
                                    <button onclick="showAddressForm()" id="address-btn" class="btn btn-purple">
                                        <i class="fas fa-map-marker-alt mr-2"></i>
                                        <span id="address-btn-text">Add Address</span>
                                    </button>
                                    <button onclick="showPreviousSubmissions()" class="btn btn-primary">
                                        <i class="fas fa-history mr-2"></i>
                                        View Submissions
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Address Display -->
                            <div id="address-display" class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200 hidden">
                                <p class="font-semibold text-green-700 mb-2">Delivery Address:</p>
                                <p id="address-text" class="text-gray-700"></p>
                            </div>
                            
                            <!-- CHANGED: Address Warning if not filled -->
                            <div id="address-warning" class="address-warning hidden">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div>
                                    <p class="font-semibold">Address Required!</p>
                                    <p class="text-sm">You must add a delivery address before submitting a project.</p>
                                </div>
                            </div>
                            
                            <!-- Project Form -->
                            <div class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <input type="text" id="project-name" class="form-control" placeholder="Your Name">
                                    <input type="email" id="project-email" class="form-control" placeholder="Email Address" disabled>
                                    <input type="tel" id="project-phone" class="form-control" placeholder="Phone Number">
                                </div>
                                
                                <div class="flex gap-4">
                                    <label class="flex items-center gap-3 p-4 bg-blue-50 rounded-lg cursor-pointer border-2 border-blue-200">
                                        <input type="radio" name="project-type" value="student" checked>
                                        <span class="font-semibold">Student Project</span>
                                    </label>
                                    <label class="flex items-center gap-3 p-4 bg-purple-50 rounded-lg cursor-pointer border-2 border-purple-200">
                                        <input type="radio" name="project-type" value="college">
                                        <span class="font-semibold">College Project</span>
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label required-field">Project Idea / Brief Description</label>
                                    <textarea id="project-description" class="form-control" 
                                              placeholder="Describe your project idea in detail. What do you want to build? What are your requirements? What is the purpose of the project?" 
                                              rows="6"></textarea>
                                </div>
                                
                                <button onclick="submitProject()" class="btn btn-primary w-full">
                                    <i class="fas fa-paper-plane mr-2"></i>
                                    Submit for Estimate
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Previous Submissions -->
                    <div id="previous-submissions" class="hidden">
                        <div class="card">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold">My Submissions</h3>
                                <button onclick="showSubmitForm()" class="btn btn-purple">
                                    <i class="fas fa-plus mr-2"></i>
                                    New Project
                                </button>
                            </div>
                            
                            <div id="submissions-list">
                                <!-- Submissions will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Address Form -->
        <div id="address-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Add/Update Address</h2>
                        <button onclick="hideAddressForm()" class="btn btn-outline">
                            Cancel
                        </button>
                    </div>
                    
                    <div class="card">
                        <div class="space-y-4">
                            <input type="text" id="address-house" class="form-control" placeholder="House No / Building Name" required>
                            <input type="text" id="address-colony" class="form-control" placeholder="Colony / Nagar Name" required>
                            <input type="text" id="address-place" class="form-control" placeholder="Place / City" required>
                            <div class="form-group">
                                <label class="form-label required-field">District</label>
                                <select id="address-district" class="form-control" required>
                                    <option value="" disabled selected>Select your district</option>
                                    <option value="Thiruvananthapuram">Thiruvananthapuram</option>
                                    <option value="Kollam">Kollam</option>
                                    <option value="Pathanamthitta">Pathanamthitta</option>
                                    <option value="Alappuzha">Alappuzha</option>
                                    <option value="Kottayam">Kottayam</option>
                                    <option value="Idukki">Idukki</option>
                                    <option value="Ernakulam">Ernakulam</option>
                                    <option value="Thrissur">Thrissur</option>
                                    <option value="Palakkad">Palakkad</option>
                                    <option value="Malappuram">Malappuram</option>
                                    <option value="Kozhikode">Kozhikode</option>
                                    <option value="Wayanad">Wayanad</option>
                                    <option value="Kannur">Kannur</option>
                                    <option value="Kasaragod">Kasaragod</option>
                                </select>
                            </div>
                            
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <p class="text-sm text-blue-700 mb-2">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    This address will be saved to your account and will be available on any device where you login.
                                </p>
                            </div>
                            
                            <button onclick="saveAddress()" class="btn btn-primary w-full">
                                <i class="fas fa-save mr-2"></i>
                                Save Address
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Page (Old - Kept for backward compatibility) -->
        <div id="payment-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Complete Payment</h2>
                        <button onclick="cancelPayment()" class="btn btn-outline">
                            Cancel
                        </button>
                    </div>
                    
                    <div class="card">
                        <div id="payment-summary" class="mb-6 p-4 bg-blue-50 rounded-lg">
                            <!-- Payment details will be loaded here -->
                        </div>
                        
                        <h3 class="text-lg font-semibold mb-4">Select Payment Method</h3>
                        <div id="payment-methods" class="space-y-3 mb-6">
                            <!-- Payment methods will be loaded here -->
                        </div>
                        
                        <!-- Screenshot Upload Section -->
                        <div id="screenshot-section" class="hidden mb-6">
                            <h3 class="text-lg font-semibold mb-4">Upload Payment Screenshot</h3>
                            <div class="screenshot-upload" onclick="document.getElementById('screenshot-file').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p class="font-semibold mb-2">Click to upload payment screenshot</p>
                                <p class="text-sm text-gray-600">Upload proof of payment (JPG, PNG, PDF)</p>
                                <input type="file" id="screenshot-file" accept=".jpg,.jpeg,.png,.pdf" class="hidden">
                                <img id="screenshot-preview" class="screenshot-preview mx-auto" alt="Screenshot Preview">
                            </div>
                            <button onclick="uploadScreenshot()" class="btn btn-success w-full mt-4">
                                <i class="fas fa-upload mr-2"></i>
                                Upload & Confirm Payment
                            </button>
                        </div>
                        
                        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg mb-6">
                            <p class="font-semibold text-yellow-800 mb-2">Payment Instructions</p>
                            <p class="text-sm text-gray-700 mb-2">UPI ID: <span class="font-mono">farhanzain448@okhdfcbank</span></p>
                            <p class="text-sm text-gray-600">Complete the payment and upload screenshot to confirm</p>
                        </div>
                        
                        <button onclick="processPayment()" class="btn btn-success w-full" id="proceed-payment-btn">
                            <i class="fas fa-credit-card mr-2"></i>
                            <span id="pay-button-text">Proceed to Payment</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tracking Page -->
        <div id="tracking-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <button onclick="setPage('dashboard')" class="btn btn-outline">
                            <i class="fas fa-arrow-left mr-2"></i> Back
                        </button>
                        <h2 class="text-xl font-bold" id="tracking-title">Order Tracking</h2>
                        <button onclick="closeTracking()" class="btn btn-outline">
                            Close
                        </button>
                    </div>
                    
                    <div class="card">
                        <div id="tracking-steps" class="space-y-4">
                            <!-- Tracking steps will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="about-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-4xl mx-auto">
                    <button onclick="setPage('home')" class="btn btn-outline mb-6">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    
                    <div class="card">
                        <h1 class="text-3xl font-bold mb-6">About Supernova</h1>
                        
                        <div class="space-y-4">
                            <h2 class="text-xl font-semibold">Who We Are</h2>
                            <p class="text-gray-700">
                                Supernova by Zynex Edutech is a pioneering platform dedicated to empowering students, innovators, and educational institutions in the fields of robotics and electronics. We bridge the gap between brilliant ideas and professional execution, transforming conceptual projects into tangible realities.
                            </p>
                            
                            <h2 class="text-xl font-semibold mt-6">Our Mission</h2>
                            <p class="text-gray-700">
                                Our mission is to democratize access to advanced technology and professional expertise. We believe that every innovative idea deserves the opportunity to become reality, regardless of technical barriers or resource constraints. Through our platform, we provide students and educators with the tools, guidance, and support needed to bring their most ambitious projects to life.
                            </p>
                            
                            <h2 class="text-xl font-semibold mt-6">Our Vision</h2>
                            <p class="text-gray-700">
                                To become the leading platform for technology education and project development, recognized for our commitment to quality, innovation, and student success. We envision a future where every student with a passion for technology has access to the resources and mentorship needed to turn their ideas into impactful solutions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services Page -->
        <div id="services-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-6xl mx-auto">
                    <button onclick="setPage('home')" class="btn btn-outline mb-6">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    
                    <div class="text-center mb-12">
                        <h1 class="text-3xl font-bold mb-4">Our Services</h1>
                        <p class="text-gray-600 max-w-2xl mx-auto">Comprehensive solutions for all your robotics and electronics needs</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Robotics Projects -->
                        <div class="card">
                            <div class="flex items-start gap-4">
                                <div class="bg-blue-100 p-3 rounded-lg">
                                    <i class="fas fa-robot text-blue-600 text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-2">Robotics Projects</h3>
                                    <p class="text-gray-600 mb-4">Complete development from basic Arduino projects to advanced autonomous systems and industrial robotics.</p>
                                    <ul class="space-y-2">
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Arduino-based robots</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Autonomous vehicles</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Industrial automation</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>AI-powered robotics</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Electronics Projects -->
                        <div class="card">
                            <div class="flex items-start gap-4">
                                <div class="bg-purple-100 p-3 rounded-lg">
                                    <i class="fas fa-microchip text-purple-600 text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-2">Electronics Projects</h3>
                                    <p class="text-gray-600 mb-4">Professional circuit design, PCB fabrication, and embedded systems development for various applications.</p>
                                    <ul class="space-y-2">
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Circuit design & simulation</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>PCB layout & fabrication</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Embedded systems</span>
                                        </li>
                                        <li class="flex items-center gap-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>IoT solutions</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Founders Page -->
        <div id="founders-page" class="page hidden">
            <div class="container py-8">
                <div class="max-w-6xl mx-auto">
                    <button onclick="setPage('home')" class="btn btn-outline mb-6">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Home
                    </button>
                    
                    <div class="text-center mb-12">
                        <h1 class="text-3xl font-bold mb-4">Meet Our Visionary Team</h1>
                        <p class="text-gray-600 max-w-2xl mx-auto">The brilliant minds behind Supernova's success</p>
                    </div>
                    
                    <div class="space-y-8">
                        <!-- Founder 1 -->
                        <div class="card">
                            <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                                <div class="founder-avatar blue text-4xl">VM</div>
                                <div class="flex-1">
                                    <h2 class="text-2xl font-bold mb-2">Vaibhav M</h2>
                                    <p class="text-blue-600 font-semibold mb-4">Chief Executive Officer (CEO)</p>
                                    <p class="text-gray-700">
                                        As the CEO of Supernova, Vaibhav leads our vision and strategic direction with unparalleled dedication. With a background in engineering and business management, he ensures that every project we undertake meets the highest standards of excellence. His leadership philosophy centers around innovation, quality, and student empowerment.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Founder 2 -->
                        <div class="card">
                            <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                                <div class="founder-avatar purple text-4xl">FZ</div>
                                <div class="flex-1">
                                    <h2 class="text-2xl font-bold mb-2">Farhan Zain</h2>
                                    <p class="text-purple-600 font-semibold mb-4">Chief Technology Officer (CTO)</p>
                                    <p class="text-gray-700">
                                        Farhan drives innovation and technical excellence at Supernova. With expertise in robotics, AI, and embedded systems, he oversees all technical development and ensures our projects leverage cutting-edge technology. His passion for education and technology makes him instrumental in translating complex concepts into student-friendly solutions.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Founder 3 -->
                        <div class="card">
                            <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                                <div class="founder-avatar green text-4xl">KU</div>
                                <div class="flex-1">
                                    <h2 class="text-2xl font-bold mb-2">Krishnan Unni</h2>
                                    <p class="text-green-600 font-semibold mb-4">Chief Operating Officer (COO)</p>
                                    <p class="text-gray-700">
                                        Krishnan manages daily operations and ensures smooth project execution from concept to delivery. His systematic approach to project management and quality control guarantees that every Supernova project meets deadlines while maintaining exceptional quality standards. He bridges the gap between technical teams and client expectations.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Founder 4 -->
                        <div class="card">
                            <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                                <div class="founder-avatar orange text-4xl">KN</div>
                                <div class="flex-1">
                                    <h2 class="text-2xl font-bold mb-2">Karthik Nair</h2>
                                    <p class="text-orange-600 font-semibold mb-4">Chief Financial Officer (CFO)</p>
                                    <p class="text-gray-700">
                                        Karthik manages financial strategy and ensures sustainable growth for our innovative projects. With a keen understanding of both technology and finance, he develops pricing models that make advanced technology accessible to students while ensuring the financial health of the organization. His strategic planning supports our mission of making quality education affordable.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- About Supernova Section -->
                    <div class="mt-12 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl text-white text-center">
                        <h2 class="text-2xl font-bold mb-4">About Supernova</h2>
                        <p class="text-lg leading-relaxed">
                            At Supernova by Zynex Edutech, we're passionate about empowering the next generation of innovators. Our team combines decades of experience in robotics, electronics, and education to deliver world-class projects for students. We believe in making cutting-edge technology accessible and turning ambitious ideas into reality.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer hidden" id="footer">
        <div class="container">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="footer-section">
                    <h3 class="footer-title">SUPERNOVA</h3>
                    <p class="text-gray-400">Zynex Edutech - Empowering Innovation through Technology Education</p>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Quick Links</h3>
                    <a href="#" onclick="setPage('home')" class="footer-link">Home</a>
                    <a href="#" onclick="setPage('about')" class="footer-link">About Us</a>
                    <a href="#" onclick="setPage('services')" class="footer-link">Services</a>
                    <a href="#" onclick="setPage('founders')" class="footer-link">Our Team</a>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Contact Us</h3>
                    <div class="space-y-3">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <a href="mailto:zainfarhan863@gmail.com" class="text-gray-400 hover:text-white">zainfarhan863@gmail.com</a>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <button onclick="copyPhoneNumber()" class="text-gray-400 hover:text-white">+91 9037772811</button>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fab fa-instagram"></i>
                            </div>
                            <a href="https://www.instagram.com/zynex.edutech" target="_blank" class="text-gray-400 hover:text-white">@zynex.edutech</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p> 2024 Supernova by Zynex Edutech. All rights reserved. | Empowering Tomorrow's Innovators Today</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <button class="whatsapp-btn" onclick="openWhatsApp()">
        <i class="fab fa-whatsapp"></i>
    </button>

    <script>
        // ==================== ADDED: ENHANCED PAYMENT GATEWAY FUNCTIONS ====================
        let selectedPaymentMethod = '';
        let selectedUPIApp = '';
        let selectedBank = '';
        let selectedWallet = '';
        let paymentGatewayOrderId = null;
        let paymentTimer = null;
        let paymentTimerSeconds = 600; // 10 minutes
        let qrCodeGenerated = false;
        
        // ==================== CHANGED: COMPANY UPI ID CONSTANT ====================
        const COMPANY_UPI_ID = "farhanzain448@okhdfcbank";
        
        // ==================== ADDED: COPY COMPANY UPI ID FUNCTION ====================
        function copyCompanyUPIId() {
            navigator.clipboard.writeText(COMPANY_UPI_ID).then(() => {
                showNotification('Company UPI ID copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy UPI ID:', err);
                showNotification('Failed to copy UPI ID. Please copy manually: ' + COMPANY_UPI_ID, 'error');
            });
        }
        
        // ==================== ADDED: PAYMENT GATEWAY INITIATION ====================
        function initiatePaymentGateway(orderId) {
            const order = previousOrders.find(o => o.id === orderId);
            if (!order || !order.estimatedPrice) {
                showNotification('Order not found or no estimate available', 'error');
                return;
            }
            
            // Set current order
            currentOrder = order;
            paymentGatewayOrderId = orderId;
            
            // Update UI
            document.getElementById('gateway-amount').textContent = `${order.estimatedPrice}`;
            document.getElementById('gateway-order-id').textContent = `Order #${order.id}`;
            document.getElementById('proceed-amount').textContent = order.estimatedPrice;
            document.getElementById('card-pay-amount').textContent = order.estimatedPrice;
            
            // Reset selections
            selectedPaymentMethod = '';
            selectedUPIApp = '';
            selectedBank = '';
            selectedWallet = '';
            
            // Reset UI
            document.querySelectorAll('.upi-app-card').forEach(card => card.classList.remove('selected'));
            document.querySelectorAll('.bank-card').forEach(card => card.classList.remove('selected'));
            document.querySelectorAll('.wallet-card').forEach(card => card.classList.remove('selected'));
            
            // Hide screenshot section initially
            document.getElementById('screenshot-upload-section').classList.add('hidden');
            document.getElementById('upload-screenshot-btn').classList.add('hidden');
            
            // Show payment gateway page
            setPage('payment-gateway');
            
            // Start payment timer
            startPaymentTimer();
            
            // Generate QR code with company UPI ID
            setTimeout(() => {
                generateQRCodeForPayment(order.estimatedPrice, order.id);
            }, 500);
            
            showNotification('Select your preferred payment method', 'info');
        }
        
        // ==================== ADDED: PAYMENT TAB NAVIGATION ====================
        function showPaymentTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.payment-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.payment-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab-content`).classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            // Update selected payment method
            selectedPaymentMethod = tabName;
            
            // Show/hide timer based on tab
            const timerContainer = document.getElementById('payment-timer-container');
            if (tabName === 'upi' || tabName === 'qr') {
                timerContainer.classList.remove('hidden');
            } else {
                timerContainer.classList.add('hidden');
            }
        }
        
        // ==================== ADDED: UPI APP SELECTION ====================
        function selectUPIApp(appName) {
            selectedUPIApp = appName;
            selectedPaymentMethod = 'upi';
            
            // Update UI
            document.querySelectorAll('.upi-app-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById(`${appName}-card`).classList.add('selected');
            
            // Update proceed button
            document.getElementById('proceed-payment-btn').innerHTML = `
                <i class="fas fa-mobile-alt mr-2"></i>
                Pay with ${getAppDisplayName(appName)} ${currentOrder.estimatedPrice}
            `;
            
            showNotification(`${getAppDisplayName(appName)} selected. Send payment to: ${COMPANY_UPI_ID}`, 'info');
        }
        
        function getAppDisplayName(appCode) {
            const apps = {
                'gpay': 'Google Pay',
                'phonepe': 'PhonePe',
                'paytm': 'Paytm',
                'bhim': 'BHIM UPI'
            };
            return apps[appCode] || appCode;
        }
        
        // ==================== ADDED: BANK SELECTION ====================
        function selectBank(bankCode) {
            selectedBank = bankCode;
            selectedPaymentMethod = 'netbanking';
            
            // Update UI
            document.querySelectorAll('.bank-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.bank-card').forEach(card => {
                if (card.onclick.toString().includes(`'${bankCode}'`)) {
                    card.classList.add('selected');
                }
            });
            
            // Update proceed button
            document.getElementById('proceed-payment-btn').innerHTML = `
                <i class="fas fa-university mr-2"></i>
                Pay with ${bankCode.toUpperCase()} ${currentOrder.estimatedPrice}
            `;
            
            showNotification(`Send payment to company UPI ID: ${COMPANY_UPI_ID}`, 'info');
        }
        
        // ==================== ADDED: WALLET SELECTION ====================
        function selectWallet(walletCode) {
            selectedWallet = walletCode;
            selectedPaymentMethod = 'wallets';
            
            // Update UI
            document.querySelectorAll('.wallet-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.wallet-card').forEach(card => {
                if (card.onclick.toString().includes(`'${walletCode}'`)) {
                    card.classList.add('selected');
                }
            });
            
            // Update proceed button
            document.getElementById('proceed-payment-btn').innerHTML = `
                <i class="fas fa-wallet mr-2"></i>
                Pay with ${getWalletDisplayName(walletCode)} ${currentOrder.estimatedPrice}
            `;
            
            showNotification(`Send payment to company UPI ID: ${COMPANY_UPI_ID}`, 'info');
        }
        
        function getWalletDisplayName(walletCode) {
            const wallets = {
                'amazon': 'Amazon Pay',
                'mobikwik': 'MobiKwik',
                'freecharge': 'FreeCharge',
                'ola': 'Ola Money'
            };
            return wallets[walletCode] || walletCode;
        }
        
        // ==================== CHANGED: PROCEED TO PAYMENT (UPDATED FOR COMPANY UPI) ====================
        function proceedToPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Please select a payment method!', 'error');
                return;
            }
            
            switch(selectedPaymentMethod) {
                case 'upi':
                    if (!selectedUPIApp) {
                        showNotification('Please select a UPI app!', 'error');
                        return;
                    }
                    openUPIAppPayment();
                    break;
                    
                case 'cards':
                    // Show card form is already visible
                    showNotification('Please fill card details above', 'info');
                    break;
                    
                case 'netbanking':
                    if (!selectedBank) {
                        showNotification('Please select a bank!', 'error');
                        return;
                    }
                    openNetBankingPayment();
                    break;
                    
                case 'wallets':
                    if (!selectedWallet) {
                        showNotification('Please select a wallet!', 'error');
                        return;
                    }
                    openWalletPayment();
                    break;
                    
                case 'qr':
                    // QR code is already displayed
                    showNotification('Scan the QR code to pay to company UPI ID', 'info');
                    break;
                    
                default:
                    showNotification('Invalid payment method', 'error');
            }
        }
        
        // ==================== CHANGED: UPI APP PAYMENT (UPDATED FOR COMPANY UPI) ====================
        function openUPIAppPayment() {
            const amount = currentOrder.estimatedPrice;
            const orderId = currentOrder.id;
            
            // Always use company UPI ID
            const upiId = COMPANY_UPI_ID;
            
            const deepLinks = {
                'gpay': `tez://upi/pay?pa=${upiId}&pn=Supernova%20Zynex%20Edutech&am=${amount}&tn=Order%20${orderId}&cu=INR`,
                'phonepe': `phonepe://pay?pa=${upiId}&pn=Supernova%20Zynex%20Edutech&am=${amount}&tn=Order%20${orderId}`,
                'paytm': `paytmmp://pay?pa=${upiId}&pn=Supernova&am=${amount}&tn=Order%20${orderId}`,
                'bhim': `bhim://upi/pay?pa=${upiId}&pn=Supernova&am=${amount}&tn=Order%20${orderId}`
            };
            
            const deepLink = deepLinks[selectedUPIApp];
            
            if (deepLink) {
                // Show loading
                showPaymentLoading('Opening UPI app...');
                
                // Try to open app
                window.location.href = deepLink;
                
                // Check if app opened
                setTimeout(() => {
                    hidePaymentLoading();
                    if (!document.hidden) {
                        // App not installed, show download option
                        showAppNotInstalled(selectedUPIApp);
                    } else {
                        // App opened, show screenshot upload
                        showScreenshotUploadSection();
                    }
                }, 1000);
            }
        }
        
        // ==================== REMOVED: payWithUPIId() function (Not needed anymore) ====================
        
        // ==================== ADDED: CARD PAYMENT PROCESSING ====================
        function processCardPayment() {
            const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
            const expiry = document.getElementById('card-expiry').value;
            const cvv = document.getElementById('card-cvv').value;
            const cardName = document.getElementById('card-name').value.trim();
            
            // Validation
            if (!cardNumber || !expiry || !cvv || !cardName) {
                showNotification('Please fill all card details!', 'error');
                return;
            }
            
            if (cardNumber.length < 16) {
                showNotification('Invalid card number!', 'error');
                return;
            }
            
            if (!expiry.includes('/') || expiry.length !== 5) {
                showNotification('Invalid expiry date (MM/YY)!', 'error');
                return;
            }
            
            if (cvv.length < 3) {
                showNotification('Invalid CVV!', 'error');
                return;
            }
            
            // Show simulated payment processing
            showPaymentLoading('Processing card payment...');
            
            // Simulate payment processing
            setTimeout(() => {
                hidePaymentLoading();
                
                // Simulate successful payment
                simulateCardPaymentSuccess();
            }, 2000);
        }
        
        function simulateCardPaymentSuccess() {
            // Show success status
            document.getElementById('gateway-payment-status').className = 'payment-status-badge processing';
            document.getElementById('gateway-payment-status').innerHTML = '<i class="fas fa-sync-alt spin"></i> Processing';
            
            // Simulate bank processing
            setTimeout(() => {
                document.getElementById('gateway-payment-status').className = 'payment-status-badge completed';
                document.getElementById('gateway-payment-status').innerHTML = '<i class="fas fa-check"></i> Completed';
                
                // Show screenshot upload section
                showScreenshotUploadSection();
                
                // Show success notification
                showNotification('Card payment processed successfully! Please upload screenshot for verification.', 'success');
                
            }, 3000);
        }
        
        // ==================== ADDED: NET BANKING PAYMENT ====================
        function openNetBankingPayment() {
            showPaymentLoading(`Redirecting to ${selectedBank.toUpperCase()} net banking...`);
            
            // Simulate bank redirect
            setTimeout(() => {
                hidePaymentLoading();
                
                // Show bank simulation
                simulateBankPayment();
            }, 1500);
        }
        
        function simulateBankPayment() {
            alert(`Simulated ${selectedBank.toUpperCase()} Net Banking\n\nIn real implementation, you would be redirected to the bank's payment page.\n\nPlease ensure you send payment to company UPI ID:\n${COMPANY_UPI_ID}`);
            
            // Show screenshot upload section
            showScreenshotUploadSection();
        }
        
        // ==================== ADDED: WALLET PAYMENT ====================
        function openWalletPayment() {
            showPaymentLoading(`Opening ${getWalletDisplayName(selectedWallet)}...`);
            
            setTimeout(() => {
                hidePaymentLoading();
                
                // Show wallet simulation
                alert(`Simulated ${getWalletDisplayName(selectedWallet)} Payment\n\nIn real implementation, you would be redirected to the wallet app.\n\nPlease ensure you send payment to company UPI ID:\n${COMPANY_UPI_ID}`);
                
                // Show screenshot upload section
                showScreenshotUploadSection();
            }, 1500);
        }
        
        // ==================== CHANGED: QR CODE PAYMENT (UPDATED FOR COMPANY UPI) ====================
        function generateQRCodeForPayment(amount, orderId) {
            if (qrCodeGenerated) return;
            
            // Always use company UPI ID
            const upiString = `upi://pay?pa=${COMPANY_UPI_ID}&pn=Supernova%20Zynex%20Edutech&am=${amount}&tn=Order%20${orderId}&cu=INR`;
            
            try {
                // Clear previous QR code
                document.getElementById('qr-code').innerHTML = '';
                
                // Generate new QR code
                new QRCode(document.getElementById("qr-code"), {
                    text: upiString,
                    width: 200,
                    height: 200,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
                
                qrCodeGenerated = true;
                
                // Update UPI ID display
                document.getElementById('display-upi-id').textContent = COMPANY_UPI_ID;
                
            } catch (error) {
                console.error('QR Code generation failed:', error);
                document.getElementById('qr-code').innerHTML = `
                    <div class="text-center text-gray-500">
                        <i class="fas fa-exclamation-triangle text-3xl mb-2"></i>
                        <p>QR Code failed to generate</p>
                        <p class="text-sm">Please use Company UPI ID: ${COMPANY_UPI_ID}</p>
                    </div>
                `;
            }
        }
        
        function refreshQRCode() {
            qrCodeGenerated = false;
            generateQRCodeForPayment(currentOrder.estimatedPrice, currentOrder.id);
            showNotification('QR Code refreshed', 'info');
        }
        
        // ==================== ADDED: PAYMENT TIMER ====================
        function startPaymentTimer() {
            paymentTimerSeconds = 600; // 10 minutes
            
            // Update timer display immediately
            updateTimerDisplay();
            
            // Start countdown
            paymentTimer = setInterval(() => {
                paymentTimerSeconds--;
                updateTimerDisplay();
                
                if (paymentTimerSeconds <= 0) {
                    clearInterval(paymentTimer);
                    paymentTimeout();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(paymentTimerSeconds / 60);
            const seconds = paymentTimerSeconds % 60;
            
            document.getElementById('payment-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer-minutes').textContent = minutes;
        }
        
        function paymentTimeout() {
            showNotification('Payment session expired! Please restart payment.', 'error');
            
            // Update status
            document.getElementById('gateway-payment-status').className = 'payment-status-badge failed';
            document.getElementById('gateway-payment-status').innerHTML = '<i class="fas fa-times"></i> Expired';
            
            // Disable proceed button
            document.getElementById('proceed-payment-btn').disabled = true;
            document.getElementById('proceed-payment-btn').innerHTML = `
                <i class="fas fa-clock mr-2"></i>
                Session Expired
            `;
        }
        
        // ==================== ADDED: SCREENSHOT UPLOAD SECTION ====================
        function showScreenshotUploadSection() {
            document.getElementById('screenshot-upload-section').classList.remove('hidden');
            document.getElementById('upload-screenshot-btn').classList.remove('hidden');
            
            // Scroll to screenshot section
            document.getElementById('screenshot-upload-section').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
            
            showNotification('Please upload payment screenshot for verification', 'info');
        }
        
        // Handle screenshot file selection
        document.getElementById('gateway-screenshot-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // Validate file type
                const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];
                if (!validTypes.includes(file.type)) {
                    showNotification('Please upload JPG, PNG, or PDF files only!', 'error');
                    this.value = '';
                    return;
                }
                
                // Validate file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('File size should be less than 5MB!', 'error');
                    this.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    paymentScreenshot = e.target.result;
                    const preview = document.getElementById('gateway-screenshot-preview');
                    
                    if (file.type.includes('image')) {
                        preview.src = paymentScreenshot;
                        preview.style.display = 'block';
                    } else {
                        // For PDF, show PDF icon
                        preview.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23667eea"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1z"/></svg>';
                        preview.style.display = 'block';
                    }
                };
                reader.readAsDataURL(file);
            }
        });
        
        // ==================== ADDED: UPLOAD SCREENSHOT ====================
        async function uploadGatewayScreenshot() {
            if (!paymentScreenshot) {
                showNotification('Please upload payment screenshot!', 'error');
                return;
            }
            
            // Show loading
            showPaymentLoading('Verifying payment...');
            
            // Update order with payment confirmation
            const allOrders = await loadOrdersFromBoth();
            const updatedOrders = allOrders.map(order => {
                if (order.id === currentOrder.id) {
                    return {
                        ...order,
                        paymentStatus: 'paid',
                        paidAt: new Date().toISOString(),
                        paymentMethod: getPaymentMethodDisplay(),
                        paymentScreenshot: paymentScreenshot,
                        tracking: { ...order.tracking, confirmed: true }
                    };
                }
                return order;
            });
            
            await updateOrderInBoth(updatedOrders);
            
            // Stop timer
            clearInterval(paymentTimer);
            
            // Hide loading
            hidePaymentLoading();
            
            // Show success
            showPaymentStatus('success', 'Payment confirmed successfully!');
            
            // Send WhatsApp notification
            sendPaymentConfirmation(currentOrder.id);
            
            // Reload orders after delay
            setTimeout(() => {
                loadUserOrders();
                setPage('dashboard');
            }, 3000);
        }
        
        function getPaymentMethodDisplay() {
            switch(selectedPaymentMethod) {
                case 'upi':
                    return selectedUPIApp ? getAppDisplayName(selectedUPIApp) : 'UPI';
                case 'cards':
                    return 'Credit/Debit Card';
                case 'netbanking':
                    return selectedBank ? `${selectedBank.toUpperCase()} Net Banking` : 'Net Banking';
                case 'wallets':
                    return selectedWallet ? getWalletDisplayName(selectedWallet) : 'Wallet';
                case 'qr':
                    return 'UPI QR Code';
                default:
                    return 'Online Payment';
            }
        }
        
        // ==================== ADDED: PAYMENT STATUS DISPLAY ====================
        function showPaymentStatus(status, message) {
            const modal = document.getElementById('payment-status-modal');
            const icon = document.getElementById('payment-status-icon');
            const title = document.getElementById('payment-status-title');
            const statusMessage = document.getElementById('payment-status-message');
            const amountSpan = document.getElementById('status-amount');
            const orderIdSpan = document.getElementById('status-order-id');
            const redirectTimer = document.getElementById('redirect-timer');
            
            // Update content
            amountSpan.textContent = currentOrder.estimatedPrice;
            orderIdSpan.textContent = `#${currentOrder.id}`;
            
            if (status === 'success') {
                icon.className = 'payment-status-icon success';
                icon.innerHTML = '<i class="fas fa-check"></i>';
                title.textContent = 'Payment Successful!';
                statusMessage.textContent = message;
                
                // Show confetti
                createConfetti();
                
                // Start redirect timer
                startRedirectTimer();
                
            } else if (status === 'pending') {
                icon.className = 'payment-status-icon pending';
                icon.innerHTML = '<i class="fas fa-clock"></i>';
                title.textContent = 'Payment Pending';
                statusMessage.textContent = message;
                redirectTimer.classList.add('hidden');
                
            } else {
                icon.className = 'payment-status-icon error';
                icon.innerHTML = '<i class="fas fa-times"></i>';
                title.textContent = 'Payment Failed';
                statusMessage.textContent = message;
                redirectTimer.classList.add('hidden');
            }
            
            // Show modal
            modal.classList.remove('hidden');
        }
        
        function closePaymentStatus() {
            document.getElementById('payment-status-modal').classList.add('hidden');
            setPage('dashboard');
        }
        
        function startRedirectTimer() {
            let seconds = 5;
            const redirectTimer = document.getElementById('redirect-timer');
            const secondsSpan = document.getElementById('redirect-seconds');
            
            redirectTimer.classList.remove('hidden');
            secondsSpan.textContent = seconds;
            
            const timer = setInterval(() => {
                seconds--;
                secondsSpan.textContent = seconds;
                
                if (seconds <= 0) {
                    clearInterval(timer);
                    closePaymentStatus();
                }
            }, 1000);
        }
        
        // ==================== ADDED: HELPER FUNCTIONS ====================
        function showPaymentLoading(message) {
            document.getElementById('loading-message').textContent = message;
            document.getElementById('payment-loading').classList.remove('hidden');
        }
        
        function hidePaymentLoading() {
            document.getElementById('payment-loading').classList.add('hidden');
        }
        
        function showAppNotInstalled(appName) {
            const downloadLinks = {
                'gpay': 'https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user',
                'phonepe': 'https://play.google.com/store/apps/details?id=com.phonepe.app',
                'paytm': 'https://play.google.com/store/apps/details?id=net.one97.paytm',
                'bhim': 'https://play.google.com/store/apps/details?id=in.org.npci.upiapp'
            };
            
            if (confirm(`${getAppDisplayName(appName)} app not detected. Would you like to download it?\n\nRemember to send payment to: ${COMPANY_UPI_ID}`)) {
                window.open(downloadLinks[appName], '_blank');
            }
            
            // Still show screenshot upload
            showScreenshotUploadSection();
        }
        
        function backToDashboardFromGateway() {
            if (paymentTimer) {
                clearInterval(paymentTimer);
            }
            setPage('dashboard');
        }
        
        function cancelGatewayPayment() {
            if (confirm('Are you sure you want to cancel this payment?')) {
                if (paymentTimer) {
                    clearInterval(paymentTimer);
                }
                setPage('dashboard');
                showNotification('Payment cancelled', 'info');
            }
        }
        
        // ==================== ADDED: CARD INPUT FORMATTING ====================
        function formatCardNumber(input) {
            let value = input.value.replace(/\D/g, '');
            value = value.replace(/(\d{4})/g, '$1 ').trim();
            input.value = value.substring(0, 19); // Max 16 digits + 3 spaces
            
            // Show/hide card icons based on first digit
            const firstDigit = value.charAt(0);
            document.getElementById('visa-icon').style.display = firstDigit === '4' ? 'flex' : 'none';
            document.getElementById('mastercard-icon').style.display = firstDigit === '5' ? 'flex' : 'none';
            document.getElementById('rupay-icon').style.display = firstDigit === '6' ? 'flex' : 'none';
        }
        
        function formatExpiryDate(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            input.value = value.substring(0, 5);
        }
        
        // ==================== ADDED: CONFETTI EFFECT ====================
        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#10b981', '#f59e0b', '#ef4444'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                
                document.body.appendChild(confetti);
                
                // Animation
                const animation = confetti.animate([
                    { top: '-10px', opacity: 1, transform: 'rotate(0deg)' },
                    { top: '100vh', opacity: 0, transform: 'rotate(360deg)' }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }
        
        // ==================== CHANGED: INITIATE PAYMENT FUNCTION ====================
        // Update the existing initiatePayment function to use new gateway
        function initiatePayment(orderId) {
            // Use new payment gateway instead of old payment page
            initiatePaymentGateway(orderId);
        }
        
        // ==================== MODIFIED: RENDER PREVIOUS ORDERS ====================
        // Update the payment button in orders list to use new gateway
        // In your existing renderPreviousOrders function, change the button to:
        // From: onclick="initiatePayment(${order.id})"
        // To: onclick="initiatePaymentGateway(${order.id})"
        
        // ==================== EXISTING FIREBASE AND APPLICATION CODE ====================
        // ... (ALL YOUR EXISTING JAVASCRIPT CODE STAYS EXACTLY THE SAME) ...
        const firebaseConfig = {
            apiKey: "AIzaSyBf7aiAiw8TIHQ0V9Q2UhmiiJfEnXVCAFQ",
            authDomain: "f-v-project.firebaseapp.com",
            databaseURL: "https://f-v-project-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "f-v-project",
            storageBucket: "f-v-project.firebasestorage.app",
            messagingSenderId: "216300594106",
            appId: "1:216300594106:web:f3ba7fcf66d7c432547383"
        };
        
        // Firebase variables
        let firebaseApp;
        let firebaseDb;
        let firebaseInitialized = false;
        
        // Initialize Firebase properly
        function initializeFirebase() {
            try {
                console.log(' Phase 1: Initializing Firebase...');
                
                // Check if Firebase is available
                if (typeof firebase === 'undefined' || !firebase.apps) {
                    console.log(' Phase 1: Firebase SDK not loaded, using REST API only');
                    updateFirebaseStatus('rest-api');
                    return false;
                }
                
                // Initialize Firebase if not already initialized
                if (!firebase.apps.length) {
                    try {
                        firebaseApp = firebase.initializeApp(firebaseConfig);
                        console.log(' Phase 1: Firebase app initialized');
                    } catch (initError) {
                        console.log(' Phase 1: Firebase already initialized or initialization failed:', initError);
                        firebaseApp = firebase.app();
                    }
                } else {
                    firebaseApp = firebase.app();
                }
                
                // Get database reference
                firebaseDb = firebase.database();
                firebaseInitialized = true;
                
                console.log(' Phase 1: Firebase initialized successfully');
                
                // Test connection
                testFirebaseConnectionPhase1();
                
                // Setup real-time listeners
                if (currentUser) {
                    setupRealTimeListeners();
                }
                
                return true;
            } catch (error) {
                console.error(' Phase 1: Firebase initialization failed:', error);
                updateFirebaseStatus('rest-api');
                return false;
            }
        }
        
        // ==================== ADDED: TEST FIREBASE CONNECTION ====================
        async function testFirebaseConnectionPhase1() {
            try {
                console.log(' Phase 1: Testing Firebase connection...');
                
                // Try to write a test value
                const testKey = 'connectionTest_' + Date.now();
                const testData = {
                    test: 'Phase 1 connection test',
                    timestamp: new Date().toISOString()
                };
                
                if (firebaseDb) {
                    // Try SDK method
                    await firebaseDb.ref(testKey).set(testData);
                    
                    // Try to read it back
                    const snapshot = await firebaseDb.ref(testKey).once('value');
                    const readData = snapshot.val();
                    
                    if (readData && readData.test === testData.test) {
                        console.log(' Phase 1: Firebase SDK connection test passed');
                        updateFirebaseStatus('connected');
                        
                        // Clean up test data
                        await firebaseDb.ref(testKey).remove();
                        
                        // Setup connection status listener
                        setupConnectionStatusListener();
                        return true;
                    }
                }
                
                // If SDK fails, try REST API
                const restApiTest = await testRestAPIConnection();
                if (restApiTest) {
                    console.log(' Phase 1: REST API connection test passed');
                    updateFirebaseStatus('rest-api');
                    return true;
                }
                
                console.log(' Phase 1: Both SDK and REST API connection tests failed');
                updateFirebaseStatus('disconnected');
                return false;
                
            } catch (error) {
                console.error(' Phase 1: Connection test error:', error);
                
                // Try REST API as fallback
                try {
                    const restApiTest = await testRestAPIConnection();
                    if (restApiTest) {
                        updateFirebaseStatus('rest-api');
                        return true;
                    }
                } catch (restError) {
                    console.error(' Phase 1: REST API test also failed:', restError);
                }
                
                updateFirebaseStatus('disconnected');
                return false;
            }
        }
        
        // ==================== ADDED: TEST REST API CONNECTION ====================
        async function testRestAPIConnection() {
            try {
                const testData = { test: 'rest_api_test', timestamp: Date.now() };
                const response = await fetch(`${FIREBASE_URL}/connectionTest.json`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    // Try to read it back
                    const readResponse = await fetch(`${FIREBASE_URL}/connectionTest.json`);
                    if (readResponse.ok) {
                        const data = await readResponse.json();
                        if (data && data.test === testData.test) {
                            return true;
                        }
                    }
                }
                return false;
            } catch (error) {
                console.error('REST API test error:', error);
                return false;
            }
        }
        
        // ==================== ADDED: SETUP CONNECTION STATUS LISTENER ====================
        function setupConnectionStatusListener() {
            if (!firebaseDb) return;
            
            try {
                firebaseDb.ref('.info/connected').on('value', (snap) => {
                    const isConnected = snap.val();
                    console.log(' Phase 1: Firebase connection status:', isConnected ? 'Connected' : 'Disconnected');
                    
                    if (isConnected) {
                        updateFirebaseStatus('connected');
                    } else {
                        updateFirebaseStatus('disconnected');
                        // Try to reconnect
                        setTimeout(testFirebaseConnectionPhase1, 3000);
                    }
                });
            } catch (error) {
                console.error(' Phase 1: Error setting up connection listener:', error);
            }
        }
        
        // ==================== UPDATED: UPDATE FIREBASE STATUS ====================
        function updateFirebaseStatus(status) {
            const statusElem = document.getElementById('firebase-status');
            if (!statusElem) return;
            
            statusElem.classList.remove('connected', 'disconnected', 'rest-api');
            
            switch(status) {
                case 'connected':
                    statusElem.className = 'firebase-status connected';
                    statusElem.innerHTML = '<span class="status-dot"></span><span>Firebase: Online</span>';
                    break;
                case 'rest-api':
                    statusElem.className = 'firebase-status connected';
                    statusElem.innerHTML = '<span class="status-dot"></span><span>Firebase: REST API</span>';
                    break;
                case 'disconnected':
                    statusElem.className = 'firebase-status disconnected';
                    statusElem.innerHTML = '<span class="status-dot"></span><span>Firebase: Offline</span>';
                    break;
            }
        }
        
        // ==================== ADDED: ENHANCED FIREBASE DATA FUNCTIONS ====================
        async function saveOrderToFirebase(order) {
            try {
                console.log(' Phase 1: Saving order to Firebase');
                
                // Get current orders
                const allOrders = await getAllOrdersFromFirebase();
                
                // Add new order
                allOrders.push(order);
                
                // Save to Firebase
                if (firebaseDb) {
                    await firebaseDb.ref('supernovaOrders').set(allOrders);
                    console.log(' Phase 1: Order saved to Firebase (real-time)');
                    
                    // Also save to Phase 1 public requests for staff panel
                    await saveToPublicRequests(order);
                    
                    return true;
                } else {
                    // Fallback to REST API
                    const saved = await saveOrdersWithRestAPI(allOrders);
                    if (saved) {
                        await saveToPublicRequests(order);
                        return true;
                    }
                    return false;
                }
            } catch (error) {
                console.error(' Phase 1: Error saving order to Firebase:', error);
                return false;
            }
        }
        
        async function saveToPublicRequests(order) {
            try {
                // Also save to separate publicRequests collection for staff panel
                const publicRequests = await loadFromFirebase('publicRequests') || [];
                publicRequests.push({
                    ...order,
                    timestamp: new Date().toISOString(),
                    phase: 'phase1',
                    status: 'new'
                });
                
                await saveToFirebase('publicRequests', publicRequests);
                console.log(' Phase 1: Order also saved to publicRequests for staff panel');
            } catch (error) {
                console.error(' Phase 1: Error saving to publicRequests:', error);
            }
        }
        
        async function getAllOrdersFromFirebase() {
            try {
                if (firebaseDb) {
                    const snapshot = await firebaseDb.ref('supernovaOrders').once('value');
                    const orders = snapshot.val();
                    return Array.isArray(orders) ? orders : [];
                } else {
                    // Fallback to REST API
                    const response = await fetch(`${FIREBASE_URL}/supernovaOrders.json`);
                    if (response.ok) {
                        const data = await response.json();
                        return Array.isArray(data) ? data : [];
                    }
                    return [];
                }
            } catch (error) {
                console.error('Error loading orders from Firebase:', error);
                return [];
            }
        }
        
        // ==================== ADDED: PAYMENT SCREENSHOT VIEWER ====================
        function viewPaymentScreenshot(orderId) {
            const order = previousOrders.find(o => o.id === orderId);
            if (!order || !order.paymentScreenshot) {
                showNotification('No payment screenshot available', 'error');
                return;
            }
            
            // Set screenshot image
            document.getElementById('screenshot-image').src = order.paymentScreenshot;
            
            // Set payment info
            const paymentInfo = document.getElementById('screenshot-info');
            paymentInfo.innerHTML = `
                <p><strong>Order ID:</strong> #${order.id}</p>
                <p><strong>Customer Name:</strong> ${order.name}</p>
                <p><strong>Amount Paid:</strong> ${order.estimatedPrice}</p>
                <p><strong>Payment Method:</strong> ${order.paymentMethod || 'Not specified'}</p>
                <p><strong>Payment Date:</strong> ${order.paidAt ? new Date(order.paidAt).toLocaleString() : 'Not available'}</p>
                <p><strong>Status:</strong> <span class="badge badge-paid">Paid</span></p>
            `;
            
            // Show modal
            document.getElementById('payment-screenshot-modal').classList.remove('hidden');
        }
        
        function closePaymentScreenshot() {
            document.getElementById('payment-screenshot-modal').classList.add('hidden');
        }
        
        // ==================== ADDED: ENHANCED ADDRESS HANDLING (ACCOUNT-BASED) ====================
        async function saveAddress() {
            const house = document.getElementById('address-house').value.trim();
            const colony = document.getElementById('address-colony').value.trim();
            const place = document.getElementById('address-place').value.trim();
            const district = document.getElementById('address-district').value;
            
            if (!house || !colony || !place || !district) {
                showNotification('Please fill all address fields!', 'error');
                return;
            }
            
            // Validate address format
            const addressString = `${house}, ${colony}, ${place}, ${district}`;
            if (addressString.length < 10) {
                showNotification('Please provide a complete address!', 'error');
                return;
            }
            
            // Create address object
            const newAddress = {
                house: house,
                colony: colony,
                place: place,
                district: district,
                fullAddress: addressString,
                savedAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Save to Firebase (linked to user account)
            const saved = await saveAddressToAccount(newAddress);
            
            if (saved) {
                // Update local userAddress
                userAddress = newAddress;
                
                // Update UI
                updateAddressDisplay();
                
                setPage('dashboard');
                showNotification('Address saved successfully! It will be available on all your devices.', 'success');
            } else {
                showNotification('Failed to save address. Please try again.', 'error');
            }
        }
        
        // ==================== ADDED: SAVE ADDRESS TO USER ACCOUNT IN FIREBASE ====================
        async function saveAddressToAccount(address) {
            try {
                if (!currentUser || !currentUser.email) {
                    showNotification('You must be logged in to save address', 'error');
                    return false;
                }
                
                console.log(' Saving address to account:', currentUser.email);
                
                // Get existing user addresses from Firebase
                const userAddresses = await loadUserAddressesFromFirebase();
                
                // Create user key from email (replace @ and . with _ for Firebase key)
                const userKey = currentUser.email.replace(/[@.]/g, '_');
                
                // Update address for this user
                userAddresses[userKey] = {
                    email: currentUser.email,
                    address: address,
                    lastUpdated: new Date().toISOString()
                };
                
                // Save to Firebase
                if (firebaseDb) {
                    await firebaseDb.ref('userAddresses').set(userAddresses);
                    console.log(' Address saved to Firebase for user:', currentUser.email);
                    
                    // Also save to localStorage as backup
                    const localAddresses = JSON.parse(localStorage.getItem('supernovaUserAddresses') || '{}');
                    localAddresses[currentUser.email] = address;
                    localStorage.setItem('supernovaUserAddresses', JSON.stringify(localAddresses));
                    
                    return true;
                } else {
                    // Fallback to REST API
                    return await saveToFirebase('userAddresses', userAddresses);
                }
            } catch (error) {
                console.error(' Error saving address to account:', error);
                return false;
            }
        }
        
        // ==================== ADDED: LOAD USER ADDRESSES FROM FIREBASE ====================
        async function loadUserAddressesFromFirebase() {
            try {
                if (firebaseDb) {
                    const snapshot = await firebaseDb.ref('userAddresses').once('value');
                    return snapshot.val() || {};
                } else {
                    const addresses = await loadFromFirebase('userAddresses');
                    return addresses || {};
                }
            } catch (error) {
                console.error(' Error loading user addresses:', error);
                return {};
            }
        }
        
        // ==================== UPDATED: LOAD USER ADDRESS (NOW FROM FIREBASE) ====================
        async function loadUserAddress() {
            if (!currentUser || !currentUser.email) return;
            
            console.log(' Loading address for user:', currentUser.email);
            
            try {
                // First try Firebase
                const userAddresses = await loadUserAddressesFromFirebase();
                const userKey = currentUser.email.replace(/[@.]/g, '_');
                
                if (userAddresses[userKey] && userAddresses[userKey].address) {
                    userAddress = userAddresses[userKey].address;
                    console.log(' Address loaded from Firebase');
                    updateAddressDisplay();
                    return;
                }
                
                // Fallback to localStorage
                const localAddresses = JSON.parse(localStorage.getItem('supernovaUserAddresses') || '{}');
                if (localAddresses[currentUser.email]) {
                    userAddress = localAddresses[currentUser.email];
                    console.log(' Address loaded from localStorage');
                    updateAddressDisplay();
                    
                    // Also save to Firebase for future sync
                    await saveAddressToAccount(userAddress);
                }
            } catch (error) {
                console.error(' Error loading address:', error);
                // Try localStorage as last resort
                const localAddresses = JSON.parse(localStorage.getItem('supernovaUserAddresses') || '{}');
                if (localAddresses[currentUser.email]) {
                    userAddress = localAddresses[currentUser.email];
                    updateAddressDisplay();
                }
            }
        }
        
        // ==================== UPDATED: UPDATE ADDRESS DISPLAY ====================
        function updateAddressDisplay() {
            const addressDisplay = document.getElementById('address-display');
            const addressText = document.getElementById('address-text');
            const addressBtn = document.getElementById('address-btn-text');
            const addressWarning = document.getElementById('address-warning');
            
            if (userAddress && userAddress.house) {
                addressDisplay.classList.remove('hidden');
                addressWarning.classList.add('hidden');
                addressText.textContent = `${userAddress.house}, ${userAddress.colony}, ${userAddress.place}, ${userAddress.district}`;
                addressBtn.textContent = 'Update Address';
            } else {
                addressDisplay.classList.add('hidden');
                addressWarning.classList.remove('hidden');
                addressBtn.textContent = 'Add Address';
            }
        }
        
        // ==================== ADDED: CHECK ADDRESS BEFORE SUBMISSION ====================
        function checkAddressBeforeSubmission() {
            if (!userAddress || !userAddress.house) {
                // Show warning and scroll to top
                document.getElementById('address-warning').classList.remove('hidden');
                document.getElementById('submit-project').scrollIntoView({ behavior: 'smooth' });
                showNotification('Please add a delivery address before submitting!', 'error');
                return false;
            }
            return true;
        }
        
        // ==================== UPDATED: SUBMIT PROJECT WITH ADDRESS CHECK ====================
        async function submitProject() {
            // CHECK: Address is required
            if (!checkAddressBeforeSubmission()) {
                return;
            }
            
            const name = document.getElementById('project-name').value;
            const email = document.getElementById('project-email').value;
            const phone = document.getElementById('project-phone').value;
            const description = document.getElementById('project-description').value;
            const projectType = document.querySelector('input[name="project-type"]:checked').value;
            
            if (!name || !phone || !description) {
                showNotification('Please fill all required fields!', 'error');
                return;
            }
            
            const order = {
                id: Date.now(),
                name,
                email,
                phone,
                type: projectType,
                projectDescription: description,
                status: 'pending',
                paymentStatus: 'pending',
                estimatedPrice: null,
                estimatedDays: null,
                staffMessage: '',
                submittedAt: new Date().toISOString(),
                address: userAddress, // Use the saved address
                tracking: {
                    confirmed: false,
                    making: false,
                    quality: false,
                    dispatched: false,
                    shipped: false,
                    out: false,
                    delivered: false
                },
                paymentScreenshot: null,
                paymentMethod: null,
                paidAt: null
            };
            
            // Save to both localStorage and Firebase
            await saveOrderToBoth(order);
            
            // Clear only name, phone, and description fields
            document.getElementById('project-name').value = '';
            document.getElementById('project-phone').value = '';
            document.getElementById('project-description').value = '';
            
            loadUserOrders();
            showNotification('Project submitted successfully! Our team will review and provide an estimate soon.', 'success');
        }
        
        // ==================== EXISTING FUNCTIONS (UNCHANGED) ====================
        // Simple Firebase REST API functions (No SDK needed)
        const FIREBASE_URL = 'https://f-v-project-default-rtdb.asia-southeast1.firebasedatabase.app';
        
        // Save data to Firebase using REST API
        async function saveToFirebase(key, data) {
            try {
                const response = await fetch(`${FIREBASE_URL}/${key}.json`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    console.log(' Data saved to Firebase:', key);
                    return true;
                } else {
                    console.error(' Firebase save failed:', await response.text());
                    return false;
                }
            } catch (error) {
                console.error(' Firebase connection error:', error);
                return false;
            }
        }
        
        // Load data from Firebase using REST API
        async function loadFromFirebase(key) {
            try {
                const response = await fetch(`${FIREBASE_URL}/${key}.json`);
                if (response.ok) {
                    const data = await response.json();
                    console.log(' Data loaded from Firebase:', key);
                    return data;
                } else {
                    console.error(' Firebase load failed:', await response.text());
                    return null;
                }
            } catch (error) {
                console.error(' Firebase connection error:', error);
                return null;
            }
        }
        
        // Save order to both localStorage and Firebase
        async function saveOrderToBoth(order) {
            // Save to localStorage
            const orders = JSON.parse(localStorage.getItem('supernovaOrders') || '[]');
            orders.push(order);
            localStorage.setItem('supernovaOrders', JSON.stringify(orders));
            
            // Also save to Firebase using enhanced method
            const firebaseSaved = await saveOrderToFirebase(order);
            if (firebaseSaved) {
                console.log(' Order saved to Firebase successfully');
            } else {
                console.log(' Order saved to localStorage only');
            }
            
            return true;
        }
        
        // Update orders in both localStorage and Firebase
        async function updateOrderInBoth(updatedOrders) {
            localStorage.setItem('supernovaOrders', JSON.stringify(updatedOrders));
            await saveOrdersWithRestAPI(updatedOrders);
            return true;
        }
        
        async function saveOrdersWithRestAPI(orders) {
            return await saveToFirebase('supernovaOrders', orders);
        }
        
        // Load orders from both localStorage and Firebase
        async function loadOrdersFromBoth() {
            try {
                // Try Firebase first
                const firebaseOrders = await loadFromFirebase('supernovaOrders');
                if (firebaseOrders && Array.isArray(firebaseOrders)) {
                    localStorage.setItem('supernovaOrders', JSON.stringify(firebaseOrders));
                    return firebaseOrders;
                }
            } catch (error) {
                console.log(' Failed to load from Firebase, using localStorage:', error);
            }
            
            // Fallback to localStorage
            return JSON.parse(localStorage.getItem('supernovaOrders') || '[]');
        }
        
        // ==================== ADDED: ONE EMAIL - ONE ACCOUNT SYSTEM ====================
        // Save user with email uniqueness check
        async function saveUserToBoth(user) {
            try {
                // Load existing users
                const users = JSON.parse(localStorage.getItem('supernovaUsers') || '[]');
                
                // Check if email already exists
                const existingUser = users.find(u => u.email === user.email);
                
                if (existingUser) {
                    // Email already exists - user must use existing password
                    console.log(` Email ${user.email} already registered. Must use existing password.`);
                    
                    // Check if password matches
                    if (existingUser.password === user.password) {
                        console.log(' Password matches existing account');
                        return true; // Allow login with correct password
                    } else {
                        console.log(' Password does not match existing account');
                        return false; // Block signup/login with wrong password
                    }
                } else {
                    // New email - create account
                    console.log(` New email ${user.email}, creating account`);
                    
                    // Add new user
                    users.push(user);
                    localStorage.setItem('supernovaUsers', JSON.stringify(users));
                    
                    // Also save to Firebase
                    await saveToFirebase('supernovaUsers', users);
                    
                    return true;
                }
            } catch (error) {
                console.error(' Error saving user:', error);
                return false;
            }
        }
        
        // Enhanced handleSignup function
        async function handleSignup() {
            const email = document.getElementById('signup-email').value.trim().toLowerCase();
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            // Validation
            if (!email || !password || !confirmPassword) {
                showNotification('Please fill all fields', 'error');
                return;
            }
            
            // Email format validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match!', 'error');
                return;
            }
            
            // Password strength validation
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long', 'error');
                return;
            }
            
            console.log(` Attempting signup for email: ${email}`);
            
            // Create user object
            const newUser = { 
                email: email, 
                password: password,
                createdAt: new Date().toISOString(),
                lastLogin: null
            };
            
            // Save user with uniqueness check
            const saved = await saveUserToBoth(newUser);
            
            if (saved) {
                // Success - account created or existing password verified
                currentUser = newUser;
                localStorage.setItem('supernovaUser', JSON.stringify(currentUser));
                updateUIForLoggedInUser();
                
                // Load user address from Firebase when user logs in
                await loadUserAddress();
                
                // Setup Firebase listeners after signup
                if (firebaseInitialized) {
                    setupRealTimeListeners();
                    setupTrackingSync();
                }
                
                setPage('dashboard');
                showNotification('Account created successfully!', 'success');
            } else {
                // Failed - email already exists with different password
                showNotification('This email is already registered. Please use your existing password to login.', 'error');
                // Switch to login form
                showLoginForm();
                // Pre-fill email
                document.getElementById('login-email').value = email;
                document.getElementById('login-password').value = '';
                document.getElementById('login-password').focus();
            }
        }
        
        // Enhanced handleLogin function
        function handleLogin() {
            const email = document.getElementById('login-email').value.trim().toLowerCase();
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                showNotification('Please enter both email and password', 'error');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('supernovaUsers') || '[]');
            const user = users.find(u => u.email === email);
            
            if (user) {
                // Check password
                if (user.password === password) {
                    // Update last login
                    user.lastLogin = new Date().toISOString();
                    localStorage.setItem('supernovaUsers', JSON.stringify(users));
                    
                    currentUser = { email: user.email, password: user.password };
                    localStorage.setItem('supernovaUser', JSON.stringify(currentUser));
                    updateUIForLoggedInUser();
                    
                    // Load user address from Firebase when user logs in
                    loadUserAddress();
                    
                    // ADDED: Setup Firebase listeners after login
                    if (firebaseInitialized) {
                        setupRealTimeListeners();
                        setupTrackingSync();
                    }
                    
                    setPage('dashboard');
                    showNotification('Login successful!', 'success');
                } else {
                    showNotification('Incorrect password!', 'error');
                }
            } else {
                showNotification('Email not registered! Please sign up first.', 'error');
                // Switch to signup form
                showSignupForm();
                // Pre-fill email
                document.getElementById('signup-email').value = email;
                document.getElementById('signup-password').value = '';
                document.getElementById('signup-confirm-password').value = '';
                document.getElementById('signup-password').focus();
            }
        }
        
        // ==================== APPLICATION STATE ====================
        let currentUser = null;
        let currentOrder = null;
        let userAddress = { house: '', colony: '', place: '', district: '' };
        let previousOrders = [];
        let paymentScreenshot = null;
        let mobileViewActive = false;

        // Kerala districts array
        const keralaDistricts = [
            "Thiruvananthapuram",
            "Kollam",
            "Pathanamthitta",
            "Alappuzha",
            "Kottayam",
            "Idukki",
            "Ernakulam",
            "Thrissur",
            "Palakkad",
            "Malappuram",
            "Kozhikode",
            "Wayanad",
            "Kannur",
            "Kasaragod"
        ];

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async function() {
            console.log(' Supernova Phase 1 Initializing...');
            
            // Initialize Firebase
            initializeFirebase();
            
            checkLoginStatus();
            setupPaymentMethods();
            renderAuthButtons();
            updateNavLinks();
            
            // Check if mobile view should be activated automatically
            if (window.innerWidth <= 768) {
                const savedMobileView = localStorage.getItem('supernovaMobileView');
                if (savedMobileView === 'active') {
                    toggleMobileView();
                }
            }
            
            console.log(' Supernova Phase 1 Ready!');
        });

        // ==================== ADDED: ENHANCED RENDER PREVIOUS ORDERS ====================
        function renderPreviousOrders() {
            const container = document.getElementById('submissions-list');
            
            if (previousOrders.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-inbox text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-500">No submissions yet</p>
                        <p class="text-sm text-gray-400 mt-2">Submit your first project to get started!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = previousOrders.map(order => {
                console.log(' Rendering order:', order.id, 'estimatedPrice:', order.estimatedPrice);
                
                const statusClass = order.paymentStatus === 'paid' ? 'badge-paid' : 
                                  order.estimatedPrice ? 'badge-estimated' : 'badge-pending';
                const statusText = order.paymentStatus === 'paid' ? 'Paid' : 
                                  order.estimatedPrice ? 'Estimated' : 'Pending';
                
                const hasScreenshot = order.paymentStatus === 'paid' && order.paymentScreenshot;
                
                // ADDED: View Receipt button for paid orders
                const receiptButton = hasScreenshot ? `
                    <button onclick="viewPaymentScreenshot(${order.id})" class="view-receipt-btn">
                        <i class="fas fa-receipt mr-1"></i>
                        View Receipt
                    </button>
                ` : '';
                
                // UPDATED: Use new payment gateway function
                const paymentButton = order.paymentStatus !== 'paid' && order.estimatedPrice ? `
                    <button onclick="initiatePaymentGateway(${order.id})" 
                            class="btn btn-success w-full">
                        <i class="fas fa-credit-card mr-2"></i>
                        Proceed to Payment Gateway
                    </button>
                ` : '';
                
                return `
                    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-4 hover:shadow-md transition">
                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
                            <div>
                                <h4 class="text-lg font-bold mb-1">${order.name}</h4>
                                <p class="text-gray-600 text-sm">${order.email} | ${order.phone}</p>
                                <p class="text-xs text-gray-500 mt-2">
                                    Submitted: ${new Date(order.submittedAt).toLocaleString()}
                                </p>
                            </div>
                            <span class="badge ${statusClass} mt-2 md:mt-0">
                                ${statusText}
                            </span>
                        </div>
                        
                        <div class="mb-4">
                            <p class="text-sm font-semibold text-gray-700 mb-1">Project Idea:</p>
                            <p class="text-gray-600 text-sm">${order.projectDescription}</p>
                        </div>
                        
                        ${order.estimatedPrice ? `
                            <div class="bg-blue-50 rounded-lg p-4 border border-blue-200 mb-4">
                                <p class="text-sm text-gray-600 mb-2">Estimated Cost & Timeline:</p>
                                <p class="text-2xl font-bold text-green-600 mb-1">${order.estimatedPrice}</p>
                                <p class="text-md font-semibold text-gray-700 mb-3">Delivery in ${order.estimatedDays} days</p>
                                ${order.staffMessage ? `
                                    <div class="bg-white rounded p-3 mb-3">
                                        <p class="text-sm font-semibold text-gray-700 mb-1">Message from our team:</p>
                                        <p class="text-gray-600 text-sm">${order.staffMessage}</p>
                                    </div>
                                ` : ''}
                                ${paymentButton}
                                ${order.paymentStatus === 'paid' ? `
                                    <div class="flex flex-col gap-2">
                                        <button onclick="showTracking(${order.id})" 
                                                class="btn btn-primary w-full">
                                            <i class="fas fa-box mr-2"></i>
                                            Track Order
                                        </button>
                                        ${receiptButton}
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // ==================== ADDED: ENHANCED SHOW TRACKING FUNCTION ====================
        function showTracking(orderId) {
            const order = previousOrders.find(o => o.id === orderId);
            if (!order) return;
            
            currentOrder = order;
            document.getElementById('tracking-title').textContent = `Order #${order.id} Tracking`;
            
            const stages = [
                { key: 'confirmed', label: 'Order Confirmed', icon: 'fa-check-circle' },
                { key: 'making', label: 'Project Making', icon: 'fa-cogs' },
                { key: 'quality', label: 'Quality Check', icon: 'fa-award' },
                { key: 'dispatched', label: 'Dispatched', icon: 'fa-shipping-fast' },
                { key: 'shipped', label: 'Shipped', icon: 'fa-truck' },
                { key: 'out', label: 'Out for Delivery', icon: 'fa-box-open' },
                { key: 'delivered', label: 'Delivered', icon: 'fa-check-circle' }
            ];
            
            const container = document.getElementById('tracking-steps');
            container.innerHTML = stages.map((stage, index) => {
                const isCompleted = order.tracking && order.tracking[stage.key];
                const isCurrent = !isCompleted && (index === 0 || (order.tracking && order.tracking[stages[index - 1]?.key]));
                
                let stepClass = 'pending';
                let statusText = '';
                
                if (isCompleted) {
                    stepClass = 'completed';
                    statusText = '<p class="step-status text-green-600">Completed</p>';
                } else if (isCurrent) {
                    stepClass = 'active';
                    statusText = '<p class="step-status text-blue-600">In Progress</p>';
                } else {
                    statusText = '<p class="step-status">Pending</p>';
                }
                
                return `
                    <div class="tracking-step">
                        <div class="step-icon ${stepClass}">
                            <i class="fas ${stage.icon}"></i>
                        </div>
                        <div class="step-content">
                            <p class="step-title">${stage.label}</p>
                            ${statusText}
                        </div>
                    </div>
                `;
            }).join('');
            
            setPage('tracking');
        }

        // ==================== EXISTING FUNCTIONS (UNCHANGED) ====================
        // Mobile View Toggle Function
        function toggleMobileView() {
            const body = document.body;
            const toggleBtn = document.getElementById('mobileToggleBtn');
            
            mobileViewActive = !mobileViewActive;
            
            if (mobileViewActive) {
                body.classList.add('mobile-view-active');
                toggleBtn.innerHTML = '<i class="fas fa-desktop"></i>';
                toggleBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                localStorage.setItem('supernovaMobileView', 'active');
                showNotification('Mobile optimized view activated', 'info');
            } else {
                body.classList.remove('mobile-view-active');
                toggleBtn.innerHTML = '<i class="fas fa-mobile-alt"></i>';
                toggleBtn.style.background = 'linear-gradient(135deg, #4f46e5, #7c3aed)';
                localStorage.setItem('supernovaMobileView', 'inactive');
                showNotification('Mobile optimized view deactivated', 'info');
            }
        }

        // Page Navigation
        function setPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById('footer').classList.add('hidden');
            
            // Show selected page
            document.getElementById(`${page}-page`).classList.remove('hidden');
            
            // Show footer for main pages
            if (['home', 'about', 'services', 'founders'].includes(page)) {
                document.getElementById('footer').classList.remove('hidden');
            }
            
            // Update navigation links
            updateNavLinks(page);
            
            // Update state if needed
            if (page === 'dashboard' && currentUser) {
                loadUserOrders();
                // Auto-fill email in project form
                document.getElementById('project-email').value = currentUser.email;
            }
        }

        function updateNavLinks(activePage) {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.textContent.toLowerCase() === activePage?.toLowerCase()) {
                    link.classList.add('active');
                }
            });
        }

        // Authentication Functions
        function checkLoginStatus() {
            const user = localStorage.getItem('supernovaUser');
            if (user) {
                currentUser = JSON.parse(user);
                updateUIForLoggedInUser();
                
                // Load user address when logged in
                loadUserAddress();
                
                // ADDED: Setup real-time listeners when user is logged in
                if (firebaseInitialized) {
                    setupRealTimeListeners();
                    setupTrackingSync();
                }
            }
        }

        function updateUIForLoggedInUser() {
            const authButtons = document.getElementById('auth-buttons');
            if (currentUser) {
                authButtons.innerHTML = `
                    <a href="#" onclick="setPage('dashboard')" class="nav-link">Dashboard</a>
                    <button onclick="handleLogout()" class="btn btn-danger btn-sm">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                `;
            } else {
                authButtons.innerHTML = `
                    <button onclick="setPage('auth')" class="btn btn-primary btn-sm">
                        <i class="fas fa-sign-in-alt"></i>
                        Login
                    </button>
                `;
            }
        }

        function renderAuthButtons() {
            updateUIForLoggedInUser();
        }

        function handleStartProject() {
            if (currentUser) {
                setPage('dashboard');
            } else {
                setPage('auth');
                showLoginForm();
            }
        }

        function showLoginForm() {
            document.getElementById('login-tab').classList.add('btn-primary');
            document.getElementById('login-tab').classList.remove('btn-outline');
            document.getElementById('signup-tab').classList.add('btn-outline');
            document.getElementById('signup-tab').classList.remove('btn-primary');
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('signup-form').classList.add('hidden');
        }

        function showSignupForm() {
            document.getElementById('signup-tab').classList.add('btn-primary');
            document.getElementById('signup-tab').classList.remove('btn-outline');
            document.getElementById('login-tab').classList.add('btn-outline');
            document.getElementById('login-tab').classList.remove('btn-primary');
            document.getElementById('signup-form').classList.remove('hidden');
            document.getElementById('login-form').classList.add('hidden');
        }

        function handleLogout() {
            currentUser = null;
            userAddress = { house: '', colony: '', place: '', district: '' };
            localStorage.removeItem('supernovaUser');
            updateUIForLoggedInUser();
            setPage('home');
            showNotification('Logged out successfully!', 'success');
        }

        // Address Functions
        function showAddressForm() {
            setPage('address');
            if (userAddress.house) {
                document.getElementById('address-house').value = userAddress.house;
                document.getElementById('address-colony').value = userAddress.colony;
                document.getElementById('address-place').value = userAddress.place;
                document.getElementById('address-district').value = userAddress.district;
            }
        }

        function hideAddressForm() {
            setPage('dashboard');
        }

        async function loadUserOrders() {
            if (!currentUser) return;
            
            const allOrders = await loadOrdersFromBoth();
            previousOrders = allOrders.filter(order => order.email === currentUser.email)
                .sort((a, b) => new Date(b.submittedAt) - new Date(a.submittedAt));
            
            renderPreviousOrders();
        }

        function showPreviousSubmissions() {
            document.getElementById('submit-project').classList.add('hidden');
            document.getElementById('previous-submissions').classList.remove('hidden');
            loadUserOrders();
        }

        function showSubmitForm() {
            document.getElementById('submit-project').classList.remove('hidden');
            document.getElementById('previous-submissions').classList.add('hidden');
        }

        // Payment Functions (Old - kept for backward compatibility)
        function setupPaymentMethods() {
            const methods = [
                { name: 'Google Pay', icon: 'fab fa-google-pay', action: 'openGooglePay' },
                { name: 'PhonePe', icon: 'fas fa-mobile-alt', action: 'openPhonePe' },
                { name: 'Paytm', icon: 'fas fa-rupee-sign', action: 'openPaytm' },
                { name: 'UPI ID', icon: 'fas fa-qrcode', action: 'showUpiInput' }
            ];
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            showNotification(`Selected ${method} for payment`, 'info');
        }

        function cancelPayment() {
            currentOrder = null;
            selectedPaymentMethod = '';
            paymentScreenshot = null;
            setPage('dashboard');
        }

        function processPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Please select a payment method!', 'error');
                return;
            }
            
            // Hide payment button and show screenshot upload
            document.getElementById('proceed-payment-btn').classList.add('hidden');
            document.getElementById('screenshot-section').classList.remove('hidden');
            
            // Open payment app based on selection
            switch(selectedPaymentMethod) {
                case 'Google Pay':
                    openGooglePay();
                    break;
                case 'PhonePe':
                    openPhonePe();
                    break;
                case 'Paytm':
                    openPaytm();
                    break;
                case 'UPI ID':
                    showUpiInput();
                    break;
            }
            
            showNotification(`Open ${selectedPaymentMethod} app to complete payment of ${currentOrder.estimatedPrice}`, 'info');
        }

        function openGooglePay() {
            const amount = currentOrder.estimatedPrice;
            showNotification('Open Google Pay app and send ' + amount + ' to ' + COMPANY_UPI_ID, 'info');
        }

        function openPhonePe() {
            const amount = currentOrder.estimatedPrice;
            showNotification('Open PhonePe app and send ' + amount + ' to ' + COMPANY_UPI_ID, 'info');
        }

        function openPaytm() {
            const amount = currentOrder.estimatedPrice;
            showNotification('Open Paytm app and send ' + amount + ' to ' + COMPANY_UPI_ID, 'info');
        }

        function showUpiInput() {
            showNotification('Send payment to Company UPI ID: ' + COMPANY_UPI_ID, 'info');
        }

        // Screenshot Upload
        document.getElementById('screenshot-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    paymentScreenshot = e.target.result;
                    const preview = document.getElementById('screenshot-preview');
                    preview.src = paymentScreenshot;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        async function uploadScreenshot() {
            if (!paymentScreenshot) {
                showNotification('Please upload payment screenshot!', 'error');
                return;
            }
            
            // Update order with payment confirmation
            const allOrders = await loadOrdersFromBoth();
            const updatedOrders = allOrders.map(order => {
                if (order.id === currentOrder.id) {
                    return {
                        ...order,
                        paymentStatus: 'paid',
                        paidAt: new Date().toISOString(),
                        paymentMethod: selectedPaymentMethod,
                        paymentScreenshot: paymentScreenshot,
                        tracking: { ...order.tracking, confirmed: true }
                    };
                }
                return order;
            });
            
            await updateOrderInBoth(updatedOrders);
            
            showNotification('Payment confirmed successfully! Order tracking has started.', 'success');
            
            // Send WhatsApp notification
            const whatsappMsg = `Payment Confirmed!%0A%0AOrder ID: ${currentOrder.id}%0AName: ${currentOrder.name}%0AAmount: ${currentOrder.estimatedPrice}%0AMethod: ${selectedPaymentMethod}%0A%0AThank you for your payment! We will start working on your project immediately.`;
            window.open(`https://wa.me/919037772811?text=${whatsappMsg}`, '_blank');
            
            // Reload orders and return to dashboard
            loadUserOrders();
            currentOrder = null;
            selectedPaymentMethod = '';
            paymentScreenshot = null;
            setPage('dashboard');
        }

        function closeTracking() {
            currentOrder = null;
            setPage('dashboard');
        }

        // WhatsApp Functions
        function openWhatsApp() {
            window.open('https://wa.me/919037772811', '_blank');
        }

        function copyPhoneNumber() {
            navigator.clipboard.writeText('+919037772811').then(() => {
                showNotification('Phone number copied to clipboard!', 'success');
            });
        }

        // Notification System
        function showNotification(message, type = 'info') {
            const notificationArea = document.getElementById('notification-area');
            const notificationId = 'notification-' + Date.now();
            
            const notification = document.createElement('div');
            notification.id = notificationId;
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${type === 'error' ? 'fa-exclamation-circle' : 
                                   type === 'success' ? 'fa-check-circle' : 
                                   'fa-info-circle'}"></i>
                </div>
                <div>${message}</div>
            `;
            
            notificationArea.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Initialize with home page
        setPage('home');
    </script>
</body>
</html>